import{r as s,j as a,ci as d,i as t,cT as k,Z as $,a1 as z,a6 as B,aP as O,S as Y}from"./vendor-9x6k4T-r.js";import{A as Z}from"./AdminButton-Dr56qn7X.js";import{I as G,D as c,a as W}from"./InstanceDetail-B4p22K57.js";import{D as m}from"./DetailsBadge-jKGz3Eqm.js";import{D as J,N as L}from"./NotesPanel-BWqAJJ8r.js";import{B as P,O as V,a as H,E as ee,D as te}from"./ActionDropdown-DlGcqXhK.js";import{P as ae}from"./PageDetail-DJvgu_vJ.js";import{P as ie}from"./PanelGroup-BCG3mCoU.js";import{c as re,A as l,m as r,U as n,e as oe,f as ne}from"./index-Bd_yPD7D.js";import{a as se}from"./CompanyForms-BzJpK2Vu.js";import{a as le,b as pe,u as de}from"./UseForm-C7xHtQGh.js";import{u as ce}from"./UseInstance-Cb46b_w1.js";import{P as me}from"./PurchaseOrderTable-DBVrol5W.js";import{S as ue}from"./SupplierPriceBreakTable-l4hcFWQA.js";import{S as _e}from"./StockItemTable-C1bOB_vf.js";import{C as ke,e as he}from"./ThemeContext-DRe09WSE.js";import"./InvenTreeTable-KDc6oHjF.js";import"./DesktopAppView-D7dqNL6j.js";import"./navigation-BUwul1Ze.js";import"./dayjs.min-DUmzidR_.js";import"./formatters-MBbtNL9a.js";import"./YesNoButton-BsHbI51V.js";import"./ColumnRenderers-CTwRHGdM.js";import"./Instance-ZaRjKoLj.js";import"./ApiIcon-BBFuOj6_.js";import"./GenericErrorPage-C2ho8aty.js";import"./NotFound-o4Sp_RYV.js";import"./PermissionDenied-Di_W_uvf.js";import"./PageTitle-D--W0kLm.js";import"./RemoteComponent-C0S0OuAi.js";import"./PurchaseOrderForms-CTnFU4km.js";import"./RemoveRowButton-PzDbXrvR.js";import"./UseGenerator-BZWzvoyo.js";import"./UseFilter-DqHeVZaa.js";import"./OrderPartsWizard-BpRHlLRb.js";import"./UsePlaceholder-C_lBT7aw.js";function He(){var y,g;const{id:v}=ke(),o=re(),N=he(),{instance:e,instanceQuery:u,refreshInstance:F,requestStatus:M}=ce({endpoint:l.supplier_part_list,pk:v,hasPrimaryKey:!0,params:{part_detail:!0,supplier_detail:!0}}),T=s.useMemo(()=>{var x,j,D,I,S,C,E,A;if(u.isFetching)return a.jsx(d,{});const i=e??{};i.manufacturer=(x=i.manufacturer_detail)==null?void 0:x.pk,i.MPN=(j=i.manufacturer_part_detail)==null?void 0:j.MPN,i.manufacturer_part=(D=i.manufacturer_part_detail)==null?void 0:D.pk;const p=[{type:"link",name:"part",label:t._({id:"GNd5ad"}),model:r.part,hidden:!e.part},{type:"string",name:"part_detail.IPN",label:t._({id:"3wXEsN"}),copy:!0,hidden:!((I=i.part_detail)!=null&&I.IPN),icon:"serial"},{type:"string",name:"part_detail.description",label:t._({id:"5ZWiLz"}),copy:!0,icon:"info",hidden:!((S=i.part_detail)!=null&&S.description)},{type:"link",external:!0,name:"link",label:t._({id:"0R4wMK"}),copy:!0,hidden:!e.link},{type:"string",name:"note",label:t._({id:"KiJn9B"}),copy:!0,hidden:!e.note}],K=[{type:"link",name:"supplier",label:t._({id:"PYTEl0"}),model:r.company,icon:"suppliers",hidden:!e.supplier},{type:"string",name:"SKU",label:t._({id:"y90mqQ"}),copy:!0,icon:"reference"},{type:"string",name:"description",label:t._({id:"Nu4oKW"}),copy:!0,hidden:!i.description},{type:"link",name:"manufacturer",label:t._({id:"+m9/3S"}),model:r.company,icon:"manufacturers",hidden:!i.manufacturer},{type:"link",name:"manufacturer_part",model_field:"MPN",label:t._({id:"ZCCuT2"}),model:r.manufacturerpart,copy:!0,icon:"reference",hidden:!i.manufacturer_part}],Q=[{type:"string",name:"packaging",label:t._({id:"pD/Ew0"}),copy:!0,hidden:!i.packaging},{type:"string",name:"pack_quantity",label:t._({id:"J9LTXQ"}),copy:!0,hidden:!i.pack_quantity,icon:"packages"}],X=[{type:"string",name:"in_stock",label:t._({id:"zn38D/"}),copy:!0,icon:"stock"},{type:"string",name:"on_order",label:t._({id:"0lg3zX"}),copy:!0,icon:"purchase_orders"},{type:"string",name:"available",label:t._({id:"WrzEdW"}),hidden:!i.availability_updated,copy:!0,icon:"packages"},{type:"string",name:"availability_updated",label:t._({id:"Qeo1xd"}),copy:!0,hidden:!i.availability_updated,icon:"calendar"}];return a.jsxs(G,{children:[a.jsxs(k,{children:[a.jsx(k.Col,{span:4,children:a.jsx(J,{appRole:n.part,src:(C=e==null?void 0:e.part_detail)==null?void 0:C.image,apiPath:oe(l.part_list,(E=e==null?void 0:e.part_detail)==null?void 0:E.pk),pk:(A=e==null?void 0:e.part_detail)==null?void 0:A.pk})}),a.jsx(k.Col,{span:8,children:a.jsx(c,{title:t._({id:"sQRZ1+"}),fields:p,item:i})})]}),a.jsx(c,{title:t._({id:"PYTEl0"}),fields:K,item:i}),a.jsx(c,{title:t._({id:"pD/Ew0"}),fields:Q,item:i}),a.jsx(c,{title:t._({id:"lXkUEV"}),fields:X,item:i})]})},[e,u.isFetching]),R=s.useMemo(()=>[{name:"details",label:t._({id:"F+J5VC"}),icon:a.jsx($,{}),content:T},{name:"stock",label:t._({id:"b447qM"}),icon:a.jsx(z,{}),content:e!=null&&e.pk?a.jsx(_e,{tableName:"supplier-stock",allowAdd:!1,params:{supplier_part:e.pk}}):a.jsx(d,{})},{name:"purchaseorders",label:t._({id:"85Yvr2"}),icon:a.jsx(B,{}),content:e!=null&&e.pk?a.jsx(me,{supplierPartId:e.pk}):a.jsx(d,{})},{name:"pricing",label:t._({id:"OQkyYP"}),icon:a.jsx(O,{}),content:e!=null&&e.pk?a.jsx(ue,{supplierPartId:e.pk}):a.jsx(d,{})},L({model_type:r.supplierpart,model_id:e==null?void 0:e.pk})],[e]),w=s.useMemo(()=>[a.jsx(Z,{model:r.supplierpart,id:e.pk}),a.jsx(P,{model:r.supplierpart,pk:e.pk,hash:e.barcode_hash,perm:o.hasChangeRole(n.purchase_order)}),a.jsx(V,{tooltip:t._({id:"XIY/fv"}),actions:[H({hidden:!o.hasAddRole(n.purchase_order),onClick:()=>f.open()}),ee({hidden:!o.hasChangeRole(n.purchase_order),onClick:()=>_.open()}),te({hidden:!o.hasDeleteRole(n.purchase_order),onClick:()=>b.open()})]})],[o,e]),h=se({}),_=le({url:l.supplier_part_list,pk:e==null?void 0:e.pk,title:t._({id:"qZstuw"}),fields:h,onFormSuccess:F}),b=pe({url:l.supplier_part_list,pk:e==null?void 0:e.pk,title:t._({id:"9Qoago"}),onFormSuccess:()=>{N(ne(r.part,e.part))}}),f=de({url:l.supplier_part_list,title:t._({id:"EREF+D"}),fields:h,initialData:{...e},follow:!0,modelType:r.supplierpart}),U=s.useMemo(()=>{var i,p;return[{name:t._({id:"UOTpFa"}),url:"/purchasing/"},{name:((i=e==null?void 0:e.supplier_detail)==null?void 0:i.name)??t._({id:"PYTEl0"}),url:`/purchasing/supplier/${((p=e==null?void 0:e.supplier_detail)==null?void 0:p.pk)??""}`}]},[e]),q=s.useMemo(()=>[a.jsx(m,{label:t._({id:"NoNwIX"}),color:"red",visible:e.active==!1}),a.jsx(m,{label:`${t._({id:"zn38D/"})}: ${e.in_stock}`,color:"green",visible:(e==null?void 0:e.active)&&(e==null?void 0:e.in_stock)&&(e==null?void 0:e.in_stock)>0},"in_stock"),a.jsx(m,{label:t._({id:"COcNhC"}),color:"red",visible:e.active&&e.in_stock==0},"no_stock"),a.jsx(m,{label:`${t._({id:"0lg3zX"})}: ${e.on_order}`,color:"blue",visible:e.on_order>0},"on_order")],[e]);return a.jsxs(a.Fragment,{children:[b.modal,f.modal,_.modal,a.jsx(W,{status:M,loading:u.isFetching,requiredRole:n.purchase_order,children:a.jsxs(Y,{gap:"xs",children:[a.jsx(ae,{title:t._({id:"nne72x"}),subtitle:`${e.SKU} - ${(y=e==null?void 0:e.part_detail)==null?void 0:y.name}`,breadcrumbs:U,badges:q,actions:w,imageUrl:(g=e==null?void 0:e.part_detail)==null?void 0:g.thumbnail,editAction:_.open,editEnabled:o.hasChangePermission(r.supplierpart)}),a.jsx(ie,{pageKey:"supplierpart",panels:R,instance:e,model:r.supplierpart,id:e.pk})]})})]})}export{He as default};
