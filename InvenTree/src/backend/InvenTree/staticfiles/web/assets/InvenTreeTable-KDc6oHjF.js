import{b$ as no,r as c,j as n,dD as oo,K as B,c9 as oe,dE as pe,dF as Fe,cw as $e,dG as ao,di as Et,dH as It,dI as zt,S as ke,G as se,B as ye,m as le,dJ as ro,dK as lt,dL as lo,bD as io,C as je,F as so,c4 as Lt,O as co,cq as uo,bz as ie,L as ho,ch as Y,dM as go,v as De,dN as mo,dO as po,c3 as fo,bM as Me,ce as xo,W as bo,dP as dt,dQ as Co,U as Rt,x as wo,by as fe,bA as it,i as u,n as St,ba as vo,dR as jo,dS as ko,dT as yo,dU as To,dV as Ro,dW as So,dX as _o,cp as Ao,bB as Bt,J as Mo,bC as Fo,dh as Vt,bO as Wt,bT as Ot,aM as Po,ct as No,cu as Eo,bG as _t,cd as Io,az as Ht,bE as zo,ax as Lo,cy as Bo,dY as Vo,cs as Wo,aN as Oo,ac as Ho,aD as Do,b9 as $o,s as Ko}from"./vendor-9x6k4T-r.js";import{a as qo,u as Dt}from"./DesktopAppView-D7dqNL6j.js";import{S as Uo,r as st,e as Qo,H as Yo}from"./ThemeContext-DRe09WSE.js";import{n as Go,l as Xo,e as ot,A as at,g as At,a as Jo,p as Zo,f as $t,u as ea,r as ta}from"./index-Bd_yPD7D.js";import{n as Kt,c as ct}from"./navigation-BUwul1Ze.js";import{u as Mt,e as qt,D as na,b as oa,c as aa,m as ra}from"./UseForm-C7xHtQGh.js";import{A as Ut}from"./ActionDropdown-DlGcqXhK.js";import{d as la}from"./dayjs.min-DUmzidR_.js";var[ia,ut]=no("useDataTableColumnsContext must be used within DataTableColumnProvider"),Ft=t=>{let{children:e,columnsOrder:o,setColumnsOrder:r,columnsToggle:a,setColumnsToggle:i,resetColumnsOrder:l,resetColumnsToggle:h,setColumnWidth:d,resetColumnsWidth:s}=t,[m,C]=c.useState(""),[g,j]=c.useState("");return n.jsx(ia,{value:{sourceColumn:m,setSourceColumn:C,targetColumn:g,setTargetColumn:j,columnsToggle:a,setColumnsToggle:i,swapColumns:()=>{if(!o||!r||!m||!g)return;let k=o.indexOf(m),S=o.indexOf(g);if(k!==-1&&S!==-1){let b=o.splice(k,1)[0];o.splice(S,0,b),r([...o])}},resetColumnsOrder:l,resetColumnsToggle:h,setColumnWidth:d,resetColumnsWidth:s},children:e})};function sa(){return n.jsx("tr",{className:"mantine-datatable-empty-row",children:n.jsx("td",{})})}function ca(){return n.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),n.jsx("path",{d:"M12.983 8.978c3.955 -.182 7.017 -1.446 7.017 -2.978c0 -1.657 -3.582 -3 -8 -3c-1.661 0 -3.204 .19 -4.483 .515m-2.783 1.228c-.471 .382 -.734 .808 -.734 1.257c0 1.22 1.944 2.271 4.734 2.74"}),n.jsx("path",{d:"M4 6v6c0 1.657 3.582 3 8 3c.986 0 1.93 -.067 2.802 -.19m3.187 -.82c1.251 -.53 2.011 -1.228 2.011 -1.99v-6"}),n.jsx("path",{d:"M4 12v6c0 1.657 3.582 3 8 3c3.217 0 5.991 -.712 7.261 -1.74m.739 -3.26v-4"}),n.jsx("path",{d:"M3 3l18 18"})]})}function da({icon:t,text:e,pt:o,pb:r,active:a,children:i}){return n.jsx(je,{pt:o,pb:r,className:"mantine-datatable-empty-state","data-active":a||void 0,children:i||n.jsxs(n.Fragment,{children:[t||n.jsx("div",{className:"mantine-datatable-empty-state-icon",children:n.jsx(ca,{})}),n.jsx(le,{component:"div",size:"sm",c:"dimmed",children:e})]})})}var ua=({key:t,columns:e=[],getInitialValueInEffect:o=!0})=>{function r(f,T){let w=[];return f.forEach(y=>{T.find(F=>F.accessor===y)&&w.push(y)}),T.forEach(y=>{w.includes(y.accessor)||w.push(y.accessor)}),w}function a(f,T){let w=[];return f.forEach(y=>{T.find(F=>F.accessor===y.accessor)&&w.push(y)}),T.forEach(y=>{w.find(F=>F.accessor===y.accessor)||w.push({accessor:y.accessor,defaultToggle:y.defaultToggle||!0,toggleable:y.toggleable,toggled:y.defaultToggle===void 0?!0:y.defaultToggle})}),w}function i(f,T){let w=[];return f.forEach(y=>{let F=Object.keys(y)[0];T.find(N=>N.accessor===F)&&w.push(y)}),T.forEach(y=>{let F=y.accessor;if(!w.find(N=>Object.keys(N)[0]===F)){let N={};N[F]="",w.push(N)}}),w}function l(){let[f,T]=Me({key:t?`${t}-columns-order`:"",defaultValue:t?s:void 0,getInitialValueInEffect:o});function w(N){t&&T(N)}if(!t)return[f,w];let y=r(f,e),F=JSON.stringify(f);return JSON.stringify(y)!==F&&w(y),[y,w]}function h(){let[f,T]=Me({key:t?`${t}-columns-toggle`:"",defaultValue:t?C:void 0,getInitialValueInEffect:o});function w(N){t&&T(N)}if(!t)return[f,w];let y=a(f,e),F=JSON.stringify(f);return JSON.stringify(y)!==F&&w(y),[a(f,e),w]}function d(){let[f,T]=Me({key:t?`${t}-columns-width`:"",defaultValue:t?m:void 0,getInitialValueInEffect:o});function w(N){t&&T(N)}if(!t)return[f,w];let y=i(f,e),F=JSON.stringify(f);return JSON.stringify(y)!==F&&w(y),[i(f,e),w]}let s=e&&e.map(f=>f.accessor)||[],m=e&&e.map(f=>({[f.accessor]:f.width??"initial"}))||[],C=e&&e.map(f=>({accessor:f.accessor,defaultToggle:f.defaultToggle||!0,toggleable:f.toggleable,toggled:f.defaultToggle===void 0?!0:f.defaultToggle})),[g,j]=l(),[k,S]=h(),[b,p]=d(),A=()=>j(s),M=()=>{S(C)},z=()=>p(m);return{effectiveColumns:c.useMemo(()=>g?g.map(f=>e.find(T=>T.accessor===f)).map(f=>{var T;return{...f,hidden:(f==null?void 0:f.hidden)||!((T=k.find(w=>w.accessor===(f==null?void 0:f.accessor)))!=null&&T.toggled)}}).map(f=>{var T;return{...f,width:(T=b.find(w=>w[f==null?void 0:f.accessor]))==null?void 0:T[f==null?void 0:f.accessor]}}):e,[e,g,k,b]),setColumnsOrder:j,columnsOrder:g,resetColumnsOrder:A,columnsToggle:k,setColumnsToggle:S,resetColumnsToggle:M,columnsWidth:b,setColumnsWidth:p,setColumnWidth:(f,T)=>{let w=b.map(y=>y[f]?{[f]:T}:y);p(w)},resetColumnsWidth:z}};function ve(){var r;let[t]=so(),{width:e,height:o}=((r=t.current)==null?void 0:r.getBoundingClientRect())||{width:0,height:0};return{ref:t,width:e,height:o}}var ha=typeof window<"u"?c.useLayoutEffect:c.useEffect;function ga(t){let[e,o]=c.useState(null),r=(t==null?void 0:t.join(":"))||"";return c.useEffect(()=>{o(null)},[r]),{lastSelectionChangeIndex:e,setLastSelectionChangeIndex:o}}function ma(t,e){let o=()=>{e(t.map(a=>a.matches))},r=t.map(a=>{try{return a.addEventListener("change",o),()=>a.removeEventListener("change",o)}catch{return a.addListener(o),()=>a.removeListener(o)}});return()=>{r.forEach(a=>a())}}function pa(t,e){return e||(typeof window<"u"&&"matchMedia"in window?t.map(o=>window.matchMedia(o).matches):t.map(()=>!1))}function fa(t,e,{getInitialValueInEffect:o}={getInitialValueInEffect:!0}){let[r,a]=c.useState(o?e:pa(t,e)),i=c.useRef();return c.useEffect(()=>{if("matchMedia"in window)return i.current=t.map(l=>window.matchMedia(l)),a(i.current.map(l=>l.matches)),ma(i.current,l=>{a(l)})},[t]),r}function xa(t){let e=Lt(),o=c.useMemo(()=>t.map(a=>(typeof a=="function"?a(e):a)??""),[t,e]),r=c.useMemo(()=>t.map(()=>!0),[t]);return fa(o,r)}function Ke(t){let e=Lt(),o=typeof t=="function"?t(e):t;return co(o||"",!0)}function ht(t){let e=t.replace(/([a-z\d])([A-Z]+)/g,"$1 $2").replace(/\W|_/g," ").trim().toLowerCase();return`${e.charAt(0).toUpperCase()}${e.slice(1)}`}function ba(t,e,o){return t.filter(r=>!e.map(o).includes(o(r)))}function rt(t,e){return t.filter((o,r,a)=>r===a.findIndex(i=>e(o)===e(i)))}function Qt(t,e){return e?e.match(/([^[.\]])+/g).reduce((o,r)=>o&&o[r],t):void 0}function Q(t,e){return typeof e=="string"?Qt(t,e):e(t)}function Ca({rowExpansion:t,records:e,idAccessor:o}){let r=[];if(t&&e){let{trigger:h,allowMultiple:d,initiallyExpanded:s}=t;e&&h==="always"?r=e.map(m=>Q(m,o)):s&&(r=e.filter((m,C)=>s({record:m,index:C})).map(m=>Q(m,o)),d||(r=[r[0]]))}let a,i,l=c.useState(r);if(t){let{expandable:h,trigger:d,allowMultiple:s,collapseProps:m,content:C}=t;t.expanded?{recordIds:a,onRecordIdsChange:i}=t.expanded:[a,i]=l;let g=j=>i==null?void 0:i(a.filter(k=>k!==Q(j,o)));return{expandOnClick:d!=="always"&&d!=="never",isRowExpanded:j=>d==="always"?!0:a.includes(Q(j,o)),isExpandable:({record:j,index:k})=>h?h({record:j,index:k}):!0,expandRow:j=>{let k=Q(j,o);i==null||i(s?[...a,k]:[k])},collapseRow:g,collapseProps:m,content:({record:j,index:k})=>()=>C({record:j,index:k,collapse:()=>g(j)})}}}function wa(t,e){let[o,r]=c.useState(t),[a,i]=c.useState(t),l=Rt(()=>r(!0),0),h=Rt(()=>i(!1),e||200);return c.useEffect(()=>{t?(h.clear(),i(!0),l.start()):(l.clear(),r(!1),h.start())},[l,h,t]),{expanded:o,visible:a}}var gt="mantine-datatable-nowrap",mt="mantine-datatable-ellipsis",Te="mantine-datatable-pointer-cursor",Yt="mantine-datatable-context-menu-cursor",va="mantine-datatable-text-selection-disabled",qe="mantine-datatable-text-align-left",Ue="mantine-datatable-text-align-center",Qe="mantine-datatable-text-align-right";function ja({className:t,style:e,visibleMediaQuery:o,title:r,noWrap:a,ellipsis:i,textAlign:l,width:h}){return Ke(o)?n.jsx(Fe,{className:B({[gt]:a||i,[mt]:i,[qe]:l==="left",[Ue]:l==="center",[Qe]:l==="right"},t),style:[{width:h,minWidth:h,maxWidth:h},e],children:r}):null}function ka({shadowVisible:t}){return n.jsx(Fe,{className:"mantine-datatable-footer-selector-placeholder-cell","data-shadow-visible":t||void 0})}var ya=c.forwardRef(function({className:t,style:e,columns:o,defaultColumnProps:r,selectionVisible:a,selectorCellShadowVisible:i,scrollDiff:l},h){let d=l<0;return n.jsx(oo,{ref:h,className:B("mantine-datatable-footer",t),style:[{position:d?"relative":"sticky",bottom:oe(d?l:0)},e],children:n.jsxs(pe,{children:[a&&n.jsx(ka,{shadowVisible:i}),o.map(({hidden:s,...m})=>{if(s)return null;let{accessor:C,visibleMediaQuery:g,textAlign:j,width:k,footer:S,footerClassName:b,footerStyle:p,noWrap:A,ellipsis:M}={...r,...m};return n.jsx(ja,{className:b,style:p,visibleMediaQuery:g,textAlign:j,width:k,title:S,noWrap:A,ellipsis:M},C)})]})})});function Ta({group:{id:t,columns:e,title:o,textAlign:r,className:a,style:i}}){let l=c.useMemo(()=>e.map(({visibleMediaQuery:s})=>s),[e]),h=xa(l),d=c.useMemo(()=>e.filter(({hidden:s},m)=>!s&&(h==null?void 0:h[m])).length,[e,h]);return d>0?n.jsx(Fe,{colSpan:d,className:B("mantine-datatable-column-group-header-cell",{[qe]:r==="left",[Ue]:r==="center",[Qe]:r==="right"},a),style:i,children:o??ht(t)}):null}function Ra(){return n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),n.jsx("path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z"})]})}function Sa(){return n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),n.jsx("path",{d:"M20 3h-16a1 1 0 0 0 -1 1v2.227l.008 .223a3 3 0 0 0 .772 1.795l4.22 4.641v8.114a1 1 0 0 0 1.316 .949l6 -2l.108 -.043a1 1 0 0 0 .576 -.906v-6.586l4.121 -4.12a3 3 0 0 0 .879 -2.123v-2.171a1 1 0 0 0 -1 -1z",strokeWidth:"0",fill:"currentColor"})]})}function _a({children:t,isActive:e}){let[o,{close:r,toggle:a}]=xo(!1);return n.jsxs(Et,{withArrow:!0,withinPortal:!0,shadow:"md",opened:o,onClose:r,trapFocus:!0,children:[n.jsx(It,{children:n.jsx(ie,{className:"mantine-datatable-header-cell-filter-action-icon","data-active":e||void 0,size:"sm",variant:"default",onClick:i=>{i.preventDefault(),a()},children:n.jsx(e?Sa:Ra,{})})}),n.jsx(zt,{onClick:i=>i.stopPropagation(),children:typeof t=="function"?t({close:r}):t})]})}var Aa=t=>{let{accessor:e,columnRef:o}=t,r=c.useRef(null),[a,i]=c.useState(0),{setColumnWidth:l}=ut(),h=m=>{m.preventDefault(),m.stopPropagation(),document.addEventListener("mousemove",d),document.addEventListener("mouseup",s),document.body.style.cursor="col-resize"},d=m=>{if(!o.current)return;let C=m.clientX-o.current.getBoundingClientRect().right,g=`${o.current.getBoundingClientRect().width+C}px`;o.current.style.width=g,l(e,o.current.style.width),i(-C)},s=()=>{o.current&&(document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",s),document.body.style.cursor="initial",l(e,o.current.style.width),i(0))};return n.jsx("div",{ref:r,onClick:m=>m.stopPropagation(),onMouseDown:h,onDoubleClick:()=>{o.current&&(o.current.style.maxWidth="initial",o.current.style.minWidth="initial",o.current.style.width="initial",l(e,"initial"))},className:"mantine-datatable-header-resizable-handle",style:{right:oe(a)}})};function Ma(){return n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),n.jsx("path",{d:"M12 5l0 14"}),n.jsx("path",{d:"M16 9l-4 -4"}),n.jsx("path",{d:"M8 9l4 -4"})]})}function Fa(){return n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),n.jsx("path",{d:"M8 7l4 -4l4 4"}),n.jsx("path",{d:"M8 17l4 4l4 -4"}),n.jsx("path",{d:"M12 3l0 18"})]})}function Pa(){return n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),n.jsx("path",{d:"M9 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),n.jsx("path",{d:"M9 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),n.jsx("path",{d:"M9 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),n.jsx("path",{d:"M15 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),n.jsx("path",{d:"M15 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),n.jsx("path",{d:"M15 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})}function Na(){return n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),n.jsx("path",{d:"M18 6l-12 12"}),n.jsx("path",{d:"M6 6l12 12"})]})}function Ea({className:t,style:e,accessor:o,visibleMediaQuery:r,title:a,sortable:i,draggable:l,toggleable:h,resizable:d,sortIcons:s,textAlign:m,width:C,sortStatus:g,onSortStatusChange:j,filter:k,filtering:S,sortKey:b}){let{setSourceColumn:p,setTargetColumn:A,swapColumns:M,setColumnsToggle:z}=ut(),[f,T]=c.useState(!1),w=c.useRef(null);if(!Ke(r))return null;let y=a??ht(o),F=typeof y=="string"?y:void 0,N=i&&j?I=>{I!=null&&I.defaultPrevented||j({sortKey:b,columnAccessor:o,direction:(g==null?void 0:g.columnAccessor)===o?g.direction==="asc"?"desc":"asc":(g==null?void 0:g.direction)??"asc"})}:void 0,E=I=>{I.stopPropagation(),p(o),T(!1)},L=I=>{I.preventDefault(),A(o),T(!0)},D=()=>{A(o),T(!1),M()},$=()=>{T(!0)},K=()=>{T(!1)},G=I=>{I.stopPropagation(),z(X=>X.map(V=>V.accessor===o?{...V,toggled:!1}:V))};return n.jsxs(Fe,{className:B({"mantine-datatable-header-cell-sortable":i,"mantine-datatable-header-cell-toggleable":h,"mantine-datatable-header-cell-resizable":d},t),style:[{width:C,...d?{minWidth:"1px"}:{minWidth:C,maxWidth:C}},e],role:i?"button":void 0,tabIndex:i?0:void 0,onClick:N,onKeyDown:I=>I.key==="Enter"&&(N==null?void 0:N()),ref:w,children:[n.jsxs(se,{className:"mantine-datatable-header-cell-sortable-group",justify:"space-between",wrap:"nowrap",children:[n.jsxs(uo,{align:"center",w:"100%",className:B({"mantine-datatable-header-cell-draggable":l,"mantine-datatable-header-cell-drag-over":f}),draggable:l,onDragStart:l?E:void 0,onDragEnter:l?$:void 0,onDragOver:l?L:void 0,onDrop:l?D:void 0,onDragLeave:l?K:void 0,children:[l?n.jsx(je,{role:"img","aria-label":"Drag column",children:n.jsx(ie,{className:"mantine-datatable-header-cell-draggable-action-icon",variant:"subtle",size:"xs",onClick:I=>{I.stopPropagation()},children:n.jsx(Pa,{})})}):null,n.jsx(ye,{className:B("mantine-datatable-header-cell-sortable-text",{[qe]:m==="left",[Ue]:m==="center",[Qe]:m==="right"},gt,mt),title:F,children:y})]}),h?n.jsx(je,{className:"mantine-datatable-header-cell-toggleable-icon",role:"img","aria-label":"Toggle column",children:n.jsx(ie,{size:"xs",variant:"light",onClick:G,children:n.jsx(Na,{})})}):null,i||(g==null?void 0:g.columnAccessor)===o?n.jsx(n.Fragment,{children:(g==null?void 0:g.columnAccessor)===o?n.jsx(je,{className:B("mantine-datatable-header-cell-sortable-icon",{"mantine-datatable-header-cell-sortable-icon-reversed":g.direction==="desc"}),role:"img","aria-label":`Sorted ${g.direction==="desc"?"descending":"ascending"}`,children:(s==null?void 0:s.sorted)||n.jsx(Ma,{})}):n.jsx(je,{className:"mantine-datatable-header-cell-sortable-unsorted-icon",role:"img","aria-label":"Not sorted",children:(s==null?void 0:s.unsorted)||n.jsx(Fa,{})})}):null,k?n.jsx(_a,{isActive:!!S,children:k}):null]}),d?n.jsx(Aa,{accessor:o,columnRef:w}):null]})}var Ia=c.forwardRef(function({className:t,style:e,trigger:o,shadowVisible:r,checked:a,indeterminate:i,checkboxProps:l,onChange:h,rowSpan:d},s){let m=!l.disabled;return n.jsx(Fe,{ref:s,className:B("mantine-datatable-header-selector-cell",{[Te]:o==="cell"&&m},t),style:e,rowSpan:d,"data-shadow-visible":r||void 0,onClick:o==="cell"&&m?h:void 0,children:n.jsx($e,{classNames:m?{input:Te}:void 0,checked:a,indeterminate:i,onChange:h,...l,disabled:!(h||l.onChange)||l.disabled})})}),za=c.forwardRef(function({selectionColumnHeaderRef:t,className:e,style:o,sortStatus:r,sortIcons:a,onSortStatusChange:i,columns:l,defaultColumnProps:h,groups:d,selectionTrigger:s,selectionVisible:m,selectionChecked:C,selectionIndeterminate:g,onSelectionChange:j,selectionCheckboxProps:k,selectorCellShadowVisible:S,selectionColumnClassName:b,selectionColumnStyle:p},A){let M=m?n.jsx(Ia,{ref:t,className:b,style:p,trigger:s,shadowVisible:S,checked:C,indeterminate:g,checkboxProps:k,onChange:j,rowSpan:d?2:void 0}):null,{columnsToggle:z,setColumnsToggle:f}=ut(),[T,w]=c.useState(!1),y=l.some(E=>E.toggleable),F=y?Object.fromEntries(l.map(({accessor:E,title:L})=>[E,L??ht(String(E))])):void 0,N=n.jsxs(ao,{className:B("mantine-datatable-header",e),style:o,ref:A,onContextMenu:y?E=>{E.preventDefault(),w(L=>!L)}:void 0,children:[d&&n.jsxs(pe,{children:[M,d.map(E=>n.jsx(Ta,{group:E},E.id))]}),n.jsxs(pe,{children:[!d&&M,l.map(({hidden:E,...L},D)=>{if(E)return null;let{accessor:$,visibleMediaQuery:K,textAlign:G,width:I,title:X,sortable:V,draggable:J,toggleable:Z,resizable:ae,titleClassName:ce,titleStyle:v,filter:x,filtering:R,sortKey:_}={...h,...L};return n.jsx(Ea,{accessor:$,className:ce,style:v,visibleMediaQuery:K,textAlign:G,width:I,title:X,sortable:V,draggable:J,toggleable:Z,resizable:ae&&D<l.length-1,sortStatus:r,sortIcons:a,sortKey:_,onSortStatusChange:i,filter:x,filtering:R},$)})]})]});return y?n.jsxs(Et,{position:"bottom",withArrow:!0,shadow:"md",opened:T,onChange:w,children:[n.jsx(It,{children:N}),n.jsx(zt,{children:n.jsx(ke,{children:z.filter(E=>E.toggleable).map(E=>n.jsx(se,{children:n.jsx($e,{classNames:{label:"mantine-datatable-header-column-toggle-checkbox-label"},size:"xs",label:F[E.accessor],checked:E.toggled,onChange:L=>{f(z.map(D=>D.accessor===E.accessor?{...D,toggled:L.currentTarget.checked}:D))}})},E.accessor))})})]}):N});function La({pt:t,pb:e,fetching:o,customContent:r,backgroundBlur:a,size:i,type:l,color:h}){return n.jsx(je,{pt:t,pb:e,className:B("mantine-datatable-loader",{"mantine-datatable-loader-fetching":o}),style:[{backdropFilter:a?`blur(${a}px)`:void 0}],children:o&&(r||n.jsx(ho,{size:i,type:l,color:h}))})}function O(t,e,o){return t?bo({color:typeof t=="object"?t[o]:t,theme:e}).value:void 0}function Ba({theme:t,c:e,backgroundColor:o,borderColor:r,rowBorderColor:a,stripedColor:i,highlightOnHoverColor:l}){return{"--mantine-datatable-color-light":O(e,t,"light"),"--mantine-datatable-color-dark":O(e,t,"dark"),"--mantine-datatable-background-color-light":O(o,t,"light"),"--mantine-datatable-background-color-dark":O(o,t,"dark"),"--mantine-datatable-border-color-light":O(r,t,"light"),"--mantine-datatable-border-color-dark":O(r,t,"dark"),"--mantine-datatable-row-border-color-light":O(a,t,"light"),"--mantine-datatable-row-border-color-dark":O(a,t,"dark"),"--mantine-datatable-striped-color-light":O(i,t,"light"),"--mantine-datatable-striped-color-dark":O(i,t,"dark"),"--mantine-datatable-highlight-on-hover-color-light":O(l,t,"light"),"--mantine-datatable-highlight-on-hover-color-dark":O(l,t,"dark")}}function Gt({theme:t,paginationActiveTextColor:e,paginationActiveBackgroundColor:o}){return{"--mantine-datatable-pagination-active-text-color-light":O(e,t,"light"),"--mantine-datatable-pagination-active-text-color-dark":O(e,t,"dark"),"--mantine-datatable-pagination-active-background-color-light":O(o,t,"light"),"--mantine-datatable-pagination-active-background-color-dark":O(o,t,"dark")}}function Va({theme:t,color:e,backgroundColor:o}){return{"--mantine-datatable-row-color-light":O(e,t,"light"),"--mantine-datatable-row-color-dark":O(e,t,"dark"),"--mantine-datatable-row-background-color-light":O(o,t,"light"),"--mantine-datatable-row-background-color-dark":O(o,t,"dark")}}function Wa(){return n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),n.jsx("path",{d:"M8 9l4 -4l4 4"}),n.jsx("path",{d:"M16 15l-4 4l-4 -4"})]})}var Pt={xs:oe(22),sm:oe(26),md:oe(32),lg:oe(38),xl:oe(44)};function Oa({size:t,label:e,values:o,value:r,activeTextColor:a,activeBackgroundColor:i,onChange:l}){return n.jsxs(se,{gap:"xs",children:[n.jsx(le,{component:"div",size:t,children:e}),n.jsxs(Y,{withinPortal:!0,withArrow:!0,classNames:{arrow:"mantine-datatable-page-size-selector-menu-arrow"},children:[n.jsx(go,{children:n.jsx(De,{size:t,variant:"default",classNames:{section:"mantine-datatable-page-size-selector-button-icon"},rightSection:n.jsx(Wa,{}),style:[{fontWeight:"normal"},h=>({height:Pt[t],paddingLeft:h.spacing[t],paddingRight:h.spacing[t]})],children:r})}),n.jsx(mo,{children:o.map(h=>{let d=h===r;return n.jsx(po,{className:B({"mantine-datatable-page-size-selector-active":d}),style:[{height:Pt[t]},d&&(a||i)?s=>Gt({theme:s,paginationActiveTextColor:a,paginationActiveBackgroundColor:i}):void 0],disabled:d,onClick:()=>l(h),children:n.jsx(le,{component:"div",size:t,children:h})},h)})})]})]})}var Ha=c.forwardRef(function({className:t,style:e,fetching:o,page:r,onPageChange:a,paginationWithEdges:i,paginationWithControls:l,paginationActiveTextColor:h,paginationActiveBackgroundColor:d,paginationSize:s,loadingText:m,noRecordsText:C,paginationText:g,totalRecords:j,recordsPerPage:k,onRecordsPerPageChange:S,recordsPerPageLabel:b,recordsPerPageOptions:p,recordsLength:A,horizontalSpacing:M,paginationWrapBreakpoint:z,getPaginationControlProps:f},T){let w;if(j){let F=(r-1)*k+1,N=F+(A||0)-1;w=g({from:F,to:N,totalRecords:j})}else w=o?m:C;let y=Ke(({breakpoints:F})=>`(min-width: ${typeof z=="number"?`${oe(z)}rem`:F[z]||z})`);return n.jsxs(ye,{ref:T,px:M??"xs",py:"xs",className:B("mantine-datatable-pagination",t),style:[{flexDirection:y?"row":"column"},e],children:[n.jsx(le,{component:"div",className:"mantine-datatable-pagination-text",size:s,children:w}),p&&n.jsx(Oa,{activeTextColor:h,activeBackgroundColor:d,size:s,label:b,values:p,value:k,onChange:S}),n.jsx(ro,{classNames:{root:B("mantine-datatable-pagination-pages",{"mantine-datatable-pagination-pages-fetching":o||!A}),control:"mantine-datatable-pagination-pages-control"},style:h||d?F=>Gt({theme:F,paginationActiveTextColor:h,paginationActiveBackgroundColor:d}):void 0,withEdges:i,withControls:l,value:r,onChange:a,size:s,total:Math.ceil(j/k),getControlProps:f})]})});function Da({className:t,style:e,visibleMediaQuery:o,record:r,index:a,onClick:i,onDoubleClick:l,onContextMenu:h,noWrap:d,ellipsis:s,textAlign:m,width:C,accessor:g,render:j,defaultRender:k,customCellAttributes:S}){return Ke(o)?n.jsx(dt,{className:B({[gt]:d||s,[mt]:s,[Te]:i||l,[Yt]:h,[qe]:m==="left",[Ue]:m==="center",[Qe]:m==="right"},t),style:[{width:C,minWidth:C,maxWidth:C},e],onClick:i,onDoubleClick:l,onContextMenu:h,...S==null?void 0:S(r,a),children:j?j(r,a):k?k(r,a,g):Qt(r,g)}):null}function $a({open:t,colSpan:e,content:o,collapseProps:r}){let{expanded:a,visible:i}=wa(t,r==null?void 0:r.transitionDuration);return i?n.jsxs(n.Fragment,{children:[n.jsx(pe,{}),n.jsx(pe,{children:n.jsx(dt,{className:"mantine-datatable-row-expansion-cell",colSpan:e,children:n.jsx(Co,{in:a,...r,children:n.jsx("div",{className:"mantine-datatable-row-expansion-cell-content",children:o()})})})})]}):null}function Ka({className:t,style:e,record:o,index:r,trigger:a,onChange:i,withRightShadow:l,checkboxProps:h,getCheckboxProps:d,...s}){let m={...h,...d(o,r)},C=!s.disabled&&!m.disabled,g=j=>{j.stopPropagation(),a==="cell"&&C&&(i==null||i(j))};return n.jsx(dt,{className:B("mantine-datatable-row-selector-cell",{[Te]:a==="cell"&&C},t),style:e,"data-shadow-visible":l||void 0,onClick:g,children:n.jsx($e,{classNames:C?{input:Te}:void 0,onChange:i,...s,...m})})}function qa({record:t,index:e,columns:o,defaultColumnProps:r,defaultColumnRender:a,selectionTrigger:i,selectionVisible:l,selectionChecked:h,onSelectionChange:d,isRecordSelectable:s,selectionCheckboxProps:m,getSelectionCheckboxProps:C,onClick:g,onDoubleClick:j,onContextMenu:k,onCellClick:S,onCellDoubleClick:b,onCellContextMenu:p,expansion:A,customAttributes:M,color:z,backgroundColor:f,className:T,style:w,selectorCellShadowVisible:y,selectionColumnClassName:F,selectionColumnStyle:N,rowFactory:E}){let L=n.jsxs(n.Fragment,{children:[l&&n.jsx(Ka,{className:F,style:N,record:t,index:e,trigger:i,withRightShadow:y,checked:h,disabled:!d||(s?!s(t,e):!1),onChange:d,checkboxProps:m,getCheckboxProps:C}),o.map(({hidden:K,hiddenContent:G,...I},X)=>{if(K||G)return null;let{accessor:V,visibleMediaQuery:J,textAlign:Z,noWrap:ae,ellipsis:ce,width:v,render:x,cellsClassName:R,cellsStyle:_,customCellAttributes:H}={...r,...I};return n.jsx(Da,{className:typeof R=="function"?R(t,e):R,style:_==null?void 0:_(t,e),visibleMediaQuery:J,record:t,index:e,onClick:S?W=>S({event:W,record:t,index:e,column:I,columnIndex:X}):void 0,onDoubleClick:b?W=>b({event:W,record:t,index:e,column:I,columnIndex:X}):void 0,onContextMenu:p?W=>p({event:W,record:t,index:e,column:I,columnIndex:X}):void 0,accessor:V,textAlign:Z,noWrap:ae,ellipsis:ce,width:v,render:x,defaultRender:a,customCellAttributes:H},V)})]}),D=A&&n.jsx($a,{colSpan:o.filter(({hidden:K})=>!K).length+(l?1:0),open:A.isRowExpanded(t),content:A.content({record:t,index:e}),collapseProps:A.collapseProps}),$=Ua({record:t,index:e,selectionChecked:h,onClick:g,onDoubleClick:j,onContextMenu:k,expansion:A,customAttributes:M,color:z,backgroundColor:f,className:T,style:w});return E?E({record:t,index:e,rowProps:$,children:L,expandedElement:D}):n.jsxs(n.Fragment,{children:[n.jsx(pe,{...$,children:L}),D]})}function Ua({record:t,index:e,selectionChecked:o,onClick:r,onDoubleClick:a,onContextMenu:i,expansion:l,customAttributes:h,color:d,backgroundColor:s,className:m,style:C}){return{className:B("mantine-datatable-row",{[Te]:r||a||(l==null?void 0:l.isExpandable({record:t,index:e}))&&(l==null?void 0:l.expandOnClick)},{[Yt]:i},typeof m=="function"?m(t,e):m),"data-selected":o||void 0,onClick:g=>{if(l){let{isExpandable:j,isRowExpanded:k,expandOnClick:S,expandRow:b,collapseRow:p}=l;j({record:t,index:e})&&S&&(k(t)?p(t):b(t))}r==null||r({event:g,record:t,index:e})},onDoubleClick:a?g=>a({event:g,record:t,index:e}):void 0,onContextMenu:i?g=>i({event:g,record:t,index:e}):void 0,style:[d||s?g=>{let j=d==null?void 0:d(t,e),k=s==null?void 0:s(t,e);return Va({theme:g,color:j,backgroundColor:k})}:void 0,C==null?void 0:C(t,e)],...(h==null?void 0:h(t,e))??{}}}function Qa({topShadowVisible:t,leftShadowVisible:e,leftShadowBehind:o,rightShadowVisible:r,rightShadowBehind:a,bottomShadowVisible:i,headerHeight:l,footerHeight:h,onScrollPositionChange:d,children:s,viewportRef:m,scrollAreaProps:C}){return n.jsxs(fo,{...C,viewportRef:m,classNames:{root:"mantine-datatable-scroll-area",scrollbar:"mantine-datatable-scroll-area-scrollbar",thumb:"mantine-datatable-scroll-area-thumb",corner:"mantine-datatable-scroll-area-corner"},onScrollPositionChange:d,children:[s,n.jsx(ye,{className:B("mantine-datatable-scroll-area-shadow","mantine-datatable-scroll-area-top-shadow",{"mantine-datatable-scroll-area-shadow-visible":t}),style:{top:l?oe(l):0}}),n.jsx("div",{className:B("mantine-datatable-scroll-area-shadow","mantine-datatable-scroll-area-left-shadow",{"mantine-datatable-scroll-area-shadow-visible":e,"mantine-datatable-scroll-area-shadow-behind":o})}),n.jsx("div",{className:B("mantine-datatable-scroll-area-shadow","mantine-datatable-scroll-area-right-shadow",{"mantine-datatable-scroll-area-shadow-visible":r,"mantine-datatable-scroll-area-shadow-behind":a})}),n.jsx(ye,{className:B("mantine-datatable-scroll-area-shadow","mantine-datatable-scroll-area-bottom-shadow",{"mantine-datatable-scroll-area-shadow-visible":i}),style:{bottom:h?oe(h+1):0}})]})}function Ya({withTableBorder:t,borderRadius:e,textSelectionDisabled:o,height:r="100%",minHeight:a,maxHeight:i,shadow:l,verticalAlign:h="center",fetching:d,columns:s,storeColumnsKey:m,groups:C,pinFirstColumn:g,pinLastColumn:j,defaultColumnProps:k,defaultColumnRender:S,idAccessor:b="id",records:p,selectionTrigger:A="checkbox",selectedRecords:M,onSelectedRecordsChange:z,selectionColumnClassName:f,selectionColumnStyle:T,isRecordSelectable:w,selectionCheckboxProps:y,allRecordsSelectionCheckboxProps:F={"aria-label":"Select all records"},getRecordSelectionCheckboxProps:N=(ee,de)=>({"aria-label":`Select record ${de+1}`}),sortStatus:E,sortIcons:L,onSortStatusChange:D,horizontalSpacing:$,page:K,onPageChange:G,totalRecords:I,recordsPerPage:X,onRecordsPerPageChange:V,recordsPerPageOptions:J,recordsPerPageLabel:Z="Records per page",paginationWithEdges:ae,paginationWithControls:ce,paginationActiveTextColor:v,paginationActiveBackgroundColor:x,paginationSize:R="sm",paginationText:_=({from:ee,to:de,totalRecords:ue})=>`${ee} - ${de} / ${ue}`,paginationWrapBreakpoint:H="sm",getPaginationControlProps:W=ee=>ee==="previous"?{"aria-label":"Previous page"}:ee==="next"?{"aria-label":"Next page"}:{},loaderBackgroundBlur:Pe,customLoader:Ye,loaderSize:Xt,loaderType:Jt,loaderColor:Zt,loadingText:en="...",emptyState:tn,noRecordsText:pt="No records",noRecordsIcon:nn,highlightOnHover:on,striped:an,noHeader:rn,onRowClick:ln,onRowDoubleClick:sn,onRowContextMenu:cn,onCellClick:dn,onCellDoubleClick:un,onCellContextMenu:hn,onScroll:Ne,onScrollToTop:Ee,onScrollToBottom:Ie,onScrollToLeft:ze,onScrollToRight:Le,c:gn,backgroundColor:mn,borderColor:pn,rowBorderColor:fn,stripedColor:xn,highlightOnHoverColor:bn,rowColor:Cn,rowBackgroundColor:wn,rowExpansion:vn,rowClassName:jn,rowStyle:kn,customRowAttributes:yn,scrollViewportRef:Tn,scrollAreaProps:Rn,tableRef:Sn,bodyRef:_n,m:An,my:Mn,mx:Fn,mt:Pn,mb:Nn,ml:En,mr:In,className:zn,classNames:q,style:Ln,styles:U,rowFactory:Bn,tableWrapper:Ge,...ft}){let{ref:ee,width:de,height:ue}=ve(),Re=c.useMemo(()=>(C==null?void 0:C.flatMap(P=>P.columns))??s,[s,C]),xt=ua({key:m,columns:Re}),{ref:Vn,height:Xe}=ve(),{ref:Wn,width:Je,height:Se}=ve(),{ref:On,height:Hn}=ve(),{ref:Dn,height:bt}=ve(),{ref:$n,width:Kn}=ve(),qn=lt(Wn,Sn),Un=lt(ee,Tn),[Ze,Ct]=c.useState(!0),[et,wt]=c.useState(!0),[_e,vt]=c.useState(!0),[Be,jt]=c.useState(!0),Qn=Ca({rowExpansion:vn,records:p,idAccessor:b}),tt=c.useCallback(()=>{var be,Ce;let P=((be=ee.current)==null?void 0:be.scrollTop)??0,te=((Ce=ee.current)==null?void 0:Ce.scrollLeft)??0;if(d||Se<=ue)Ct(!0),wt(!0);else{let ne=P===0,re=Se-P-ue<1;Ct(ne),wt(re),ne&&ne!==Ze&&(Ee==null||Ee()),re&&re!==et&&(Ie==null||Ie())}if(d||Je===de)vt(!0),jt(!0);else{let ne=te===0,re=Je-te-de<1;vt(ne),jt(re),ne&&ne!==_e&&(ze==null||ze()),re&&re!==Be&&(Le==null||Le())}},[d,Ie,ze,Le,Ee,ue,ee,de,et,_e,Be,Ze,Se,Je]);ha(tt,[tt]);let kt=lo(tt,50),Yn=c.useCallback(P=>{Ne==null||Ne(P),kt()},[kt,Ne]),Gn=c.useCallback(P=>{var te;(te=ee.current)==null||te.scrollTo({top:0,left:0}),G(P)},[G,ee]),Ve=p==null?void 0:p.length,yt=p==null?void 0:p.map(P=>Q(P,b)),xe=!!M,he=M==null?void 0:M.map(P=>Q(P,b)),Tt=yt!==void 0&&he!==void 0&&he.length>0,Ae=w?p==null?void 0:p.filter(w):p,We=Ae==null?void 0:Ae.map(P=>Q(P,b)),Oe=Tt&&We.every(P=>he.includes(P)),Xn=Tt&&We.some(P=>he.includes(P)),Jn=c.useCallback(()=>{M&&z&&z(Oe?M.filter(P=>!We.includes(Q(P,b))):rt([...M,...Ae],P=>Q(P,b)))},[Oe,b,z,We,Ae,M]),{lastSelectionChangeIndex:He,setLastSelectionChangeIndex:Zn}=ga(yt),nt=xe&&!_e&&!g,eo={m:An,my:Mn,mx:Fn,mt:Pn,mb:Nn,ml:En,mr:In},to=c.useCallback(({children:P})=>Ge?Ge({children:P}):P,[Ge]);return n.jsx(Ft,{...xt,children:n.jsxs(ye,{...eo,className:B("mantine-datatable",{"mantine-datatable-with-border":t},zn,q==null?void 0:q.root),style:[P=>({...Ba({theme:P,c:gn,backgroundColor:mn,borderColor:pn,rowBorderColor:fn,stripedColor:xn,highlightOnHoverColor:bn}),borderRadius:P.radius[e]||e,boxShadow:P.shadows[l]||l,height:r,minHeight:a,maxHeight:i}),Ln,U==null?void 0:U.root,{position:"relative"}],children:[n.jsx(Qa,{viewportRef:Un,topShadowVisible:!Ze,leftShadowVisible:!_e,leftShadowBehind:xe||!!g,rightShadowVisible:!Be,rightShadowBehind:j,bottomShadowVisible:!et,headerHeight:Xe,footerHeight:Hn,onScrollPositionChange:Yn,scrollAreaProps:Rn,children:n.jsx(to,{children:n.jsxs(io,{ref:qn,horizontalSpacing:$,className:B("mantine-datatable-table",{[va]:o,"mantine-datatable-vertical-align-top":h==="top","mantine-datatable-vertical-align-bottom":h==="bottom","mantine-datatable-last-row-border-bottom-visible":ft.withRowBorders&&Se<ue,"mantine-datatable-pin-last-column":j,"mantine-datatable-pin-last-column-scrolled":!Be&&j,"mantine-datatable-selection-column-visible":xe,"mantine-datatable-pin-first-column":g,"mantine-datatable-pin-first-column-scrolled":!_e&&g},q==null?void 0:q.table),style:{...U==null?void 0:U.table,"--mantine-datatable-selection-column-width":`${Kn}px`},"data-striped":Ve&&an||void 0,"data-highlight-on-hover":on||void 0,...ft,children:[rn?null:n.jsx(Ft,{...xt,children:n.jsx(za,{ref:Vn,selectionColumnHeaderRef:$n,className:q==null?void 0:q.header,style:U==null?void 0:U.header,columns:Re,defaultColumnProps:k,groups:C,sortStatus:E,sortIcons:L,onSortStatusChange:D,selectionTrigger:A,selectionVisible:xe,selectionChecked:Oe,selectionIndeterminate:Xn&&!Oe,onSelectionChange:Jn,selectionCheckboxProps:{...y,...F},selectorCellShadowVisible:nt,selectionColumnClassName:f,selectionColumnStyle:T})}),n.jsx("tbody",{ref:_n,children:Ve?p.map((P,te)=>{let be=Q(P,b),Ce=(he==null?void 0:he.includes(be))||!1,ne;return z&&M&&(ne=re=>{if(re.nativeEvent.shiftKey&&He!==null){let we=p.filter(te>He?(ge,me)=>me>=He&&me<=te&&(w?w(ge,me):!0):(ge,me)=>me>=te&&me<=He&&(w?w(ge,me):!0));z(Ce?ba(M,we,ge=>Q(ge,b)):rt([...M,...we],ge=>Q(ge,b)))}else z(Ce?M.filter(we=>Q(we,b)!==be):rt([...M,P],we=>Q(we,b)));Zn(te)}),n.jsx(qa,{record:P,index:te,columns:Re,defaultColumnProps:k,defaultColumnRender:S,selectionTrigger:A,selectionVisible:xe,selectionChecked:Ce,onSelectionChange:ne,isRecordSelectable:w,selectionCheckboxProps:y,getSelectionCheckboxProps:N,onClick:ln,onDoubleClick:sn,onCellClick:dn,onCellDoubleClick:un,onContextMenu:cn,onCellContextMenu:hn,expansion:Qn,color:Cn,backgroundColor:wn,className:jn,style:kn,customAttributes:yn,selectorCellShadowVisible:nt,selectionColumnClassName:f,selectionColumnStyle:T,idAccessor:b,rowFactory:Bn},be)}):n.jsx(sa,{})}),Re.some(({footer:P})=>P)&&n.jsx(ya,{ref:On,className:q==null?void 0:q.footer,style:U==null?void 0:U.footer,columns:Re,defaultColumnProps:k,selectionVisible:xe,selectorCellShadowVisible:nt,scrollDiff:Se-ue})]})})}),K&&n.jsx(Ha,{ref:Dn,className:q==null?void 0:q.pagination,style:U==null?void 0:U.pagination,horizontalSpacing:$,fetching:d,page:K,onPageChange:Gn,totalRecords:I,recordsPerPage:X,onRecordsPerPageChange:V,recordsPerPageOptions:J,recordsPerPageLabel:Z,paginationWithEdges:ae,paginationWithControls:ce,paginationActiveTextColor:v,paginationActiveBackgroundColor:x,paginationSize:R,paginationText:_,paginationWrapBreakpoint:H,getPaginationControlProps:W,noRecordsText:pt,loadingText:en,recordsLength:Ve}),n.jsx(La,{pt:Xe,pb:bt,fetching:d,backgroundBlur:Pe,customContent:Ye,size:Xt,type:Jt,color:Zt}),n.jsx(da,{pt:Xe,pb:bt,icon:nn,text:pt,active:!d&&!Ve,children:tn})]})})}var Ga=c.forwardRef(function({children:t,isDragging:e,...o},r){let a=c.useRef(null),i=lt(a,r);return c.useEffect(()=>{if(!a.current||!e)return;let l=a.current.parentElement.parentElement.children[0].children[0];for(let h=0;h<l.children.length;h++){let d=l.children[h].getBoundingClientRect(),s=a.current.children[h];s.style.height=d.height+"px",s.style.width=d.width+"px",s.style.minWidth=d.width+"px",s.style.maxWidth=d.width+"px"}},[e,t]),n.jsx(pe,{"data-is-dragging":e,ref:i,...o,children:t})});Ga.displayName="DataTableDraggableRow";function wr(t,e="pk"){function o(){return`${t.replaceAll("-","")}-${wo()}`}const[r,a]=qo(),i=c.useCallback(()=>{a({})},[]),[l,h]=c.useState(o()),d=c.useCallback(()=>{h(o())},[o]),[s,m]=Me({key:`inventree-table-filters-${t}`,defaultValue:[],getInitialValueInEffect:!1}),C=c.useCallback(()=>{m([])},[]),[g,j]=c.useState([]),k=c.useCallback(V=>g.includes(V),[g]),[S,b]=c.useState([]),p=c.useMemo(()=>S.map(V=>V[e||"pk"]),[S]),A=c.useCallback(()=>{b([])},[]),M=c.useMemo(()=>S.length>0,[S]),[z,f]=c.useState(0),[T,w]=c.useState(1),[y,F]=c.useState(25),[N,E]=Me({key:`inventree-hidden-table-columns-${t}`,defaultValue:[]}),[L,D]=c.useState(""),[$,K]=c.useState([]),G=c.useCallback(V=>{const J=[...$],Z=J.findIndex(ae=>ae[e||"pk"]===V.pk);Z>=0?J[Z]={...J[Z],...V}:J.push(V),K(J)},[$]),[I,X]=c.useState(!1);return{tableKey:l,refreshTable:d,isLoading:I,setIsLoading:X,activeFilters:s,setActiveFilters:m,clearActiveFilters:C,queryFilters:r,setQueryFilters:a,clearQueryFilters:i,expandedRecords:g,setExpandedRecords:j,isRowExpanded:k,selectedRecords:S,selectedIds:p,setSelectedRecords:b,clearSelectedRecords:A,hasSelectedRecords:M,hiddenColumns:N,setHiddenColumns:E,searchTerm:L,setSearchTerm:D,recordCount:z,setRecordCount:f,page:T,setPage:w,pageSize:y,setPageSize:F,records:$,setRecords:K,updateRecord:G,idAccessor:e}}function Xa({icon:t,actions:e,tooltip:o="",label:r=""}){return n.jsxs(Y,{shadow:"xs",children:[n.jsx(Y.Target,{children:n.jsx(ie,{variant:"default",children:n.jsx(fe,{label:o,children:t})})}),n.jsxs(Y.Dropdown,{children:[r&&n.jsx(Y.Label,{children:r}),e.map((a,i)=>n.jsx(Y.Item,{children:a},`${i}-${a}`))]})]})}function Ja({items:t,hidden:e,enableLabels:o,enableReports:r,modelType:a}){const i=Go(),l=Xo(),h=c.useMemo(()=>t.length>0,[t]),[d,s]=c.useState(""),m=c.useMemo(()=>o&&l.isSet("LABEL_ENABLE"),[o,l]),C=c.useMemo(()=>r&&l.isSet("REPORT_ENABLE"),[r,l]),g=it({enabled:m,queryKey:["printingFields",a,d],gcTime:500,queryFn:()=>Jo.options(ot(at.label_print),{params:{plugin:d||void 0}}).then(b=>qt(b,"POST")||{}).catch(()=>({}))}),j=c.useMemo(()=>{const b=g.data||{};return b.template={...b.template,filters:{enabled:!0,model_type:a,items:t.join(",")}},b.items={...b.items,value:t,hidden:!0},b.plugin={...b.plugin,value:i.getSetting("LABEL_DEFAULT_PRINTER"),filters:{active:!0,mixin:"labels"},onValueChange:(p,A)=>{A!=null&&A.key&&(A==null?void 0:A.key)!=d&&s(A.key)}},b},[g.data,t]),k=Mt({url:ot(at.label_print),title:u._({id:"kjqRDg"}),fields:j,timeout:(t.length+1)*5e3,onClose:()=>{s("")},submitText:u._({id:"BZz12Q"}),successMessage:u._({id:"pT7uop"}),onFormSuccess:b=>{if(s(""),!b.complete){St.show({title:u._({id:"SlfejT"}),message:u._({id:"3Dx00w"}),color:"red"});return}if(b.output){const p=At(b.output);window.open(p.toString(),"_blank")}}}),S=Mt({title:u._({id:"qsurSb"}),url:ot(at.report_print),timeout:(t.length+1)*5e3,fields:{template:{filters:{enabled:!0,model_type:a,items:t.join(",")}},items:{hidden:!0,value:t}},submitText:u._({id:"ziAjHi"}),successMessage:u._({id:"nu+rR/"}),onFormSuccess:b=>{if(!b.complete){St.show({title:u._({id:"SlfejT"}),message:u._({id:"cvLQZH"}),color:"red"});return}if(b.output){const p=At(b.output);window.open(p.toString(),"_blank")}}});return!a||!m&&!C?null:!e&&n.jsxs(n.Fragment,{children:[S.modal,k.modal,n.jsx(Ut,{tooltip:u._({id:"/oz6DG"}),icon:n.jsx(vo,{}),disabled:!h,actions:[{name:u._({id:"Y93N6T"}),icon:n.jsx(jo,{}),onClick:()=>k.open(),hidden:!m},{name:u._({id:"ClULGR"}),icon:n.jsx(ko,{}),onClick:()=>S.open(),hidden:!C}]})]})}function Za({columns:t,onToggleColumn:e}){return n.jsxs(Y,{shadow:"xs",closeOnItemClick:!1,children:[n.jsx(Y.Target,{children:n.jsx(ie,{variant:"transparent","aria-label":"table-select-columns",children:n.jsx(fe,{label:u._({id:"kCTFU8"}),children:n.jsx(yo,{})})})}),n.jsxs(Y.Dropdown,{children:[n.jsx(Y.Label,{children:u._({id:"kCTFU8"})}),t.filter(o=>o.switchable??!0).map(o=>n.jsx(Y.Item,{children:n.jsx($e,{checked:!o.hidden,label:o.title||o.accessor,onChange:()=>e(o.accessor),radius:"sm"})},o.accessor))]})]})}function er({downloadCallback:t}){const e=[{value:"csv",label:u._({id:"6N5Lt+"}),icon:n.jsx(To,{})},{value:"tsv",label:u._({id:"Keu6yk"}),icon:n.jsx(Ro,{})},{value:"xlsx",label:u._({id:"Ii6Hnh"}),icon:n.jsx(So,{})}],o=c.useMemo(()=>e.map(r=>({name:r.label,icon:r.icon,onClick:()=>t(r.value)})),[e,t]);return n.jsx(Ut,{tooltip:u._({id:"p63Z1c"}),icon:n.jsx(_o,{}),actions:o})}function tr(t){return t.choices?t.choices:t.choiceFunction?t.choiceFunction():[{value:"true",label:u._({id:"l75CjT"})},{value:"false",label:u._({id:"1UzENP"})}]}function nr(t){return()=>{const e=Zo.getState().status;if(!e)return[];const o=e[t];return o?Object.keys(o.values).map(r=>{var i;const a=o.values[r];return{value:a.key.toString(),label:((i=a.label)==null?void 0:i.toString())??a.key.toString()}}):[]}}function vr(){return{name:"assigned_to_me",type:"boolean",label:u._({id:"iU3XRS"}),description:u._({id:"BnF3ID"})}}function jr(){return{name:"outstanding",label:u._({id:"aimnwe"}),description:u._({id:"5Dr8AX"})}}function kr(){return{name:"overdue",label:u._({id:"ddrz1m"}),description:u._({id:"eoAfY+"})}}function yr(){return{name:"min_date",label:u._({id:"vhCfRp"}),description:u._({id:"g6o1nx"}),type:"date"}}function Tr(){return{name:"max_date",label:u._({id:"dogwLN"}),description:u._({id:"/Is0Q9"}),type:"date"}}function Rr(){return{name:"created_before",label:u._({id:"XIK9k0"}),description:u._({id:"BVOUXI"}),type:"date"}}function Sr(){return{name:"created_after",label:u._({id:"pQfuT0"}),description:u._({id:"5D7LoD"}),type:"date"}}function _r(){return{name:"target_date_before",label:u._({id:"SsUIID"}),description:u._({id:"Ey6gw7"}),type:"date"}}function Ar(){return{name:"target_date_after",label:u._({id:"a8vo2j"}),description:u._({id:"wvwgPk"}),type:"date"}}function Mr(){return{name:"completed_before",label:u._({id:"7Ul+eL"}),description:u._({id:"qR6hn8"}),type:"date"}}function Fr(){return{name:"completed_after",label:u._({id:"cFFv89"}),description:u._({id:"liohcD"}),type:"date"}}function Pr(){return{name:"has_project_code",type:"boolean",label:u._({id:"e7gdBS"}),description:u._({id:"gW+vYR"})}}function Nr({model:t}){return{name:"status",label:u._({id:"uAQUqI"}),description:u._({id:"OIH7WF"}),choiceFunction:nr(t)}}function Er({choices:t}){return{name:"project_code",label:u._({id:"Sdfr6G"}),description:u._({id:"8sHFLc"}),choices:t}}function Ir({choices:t}){return{name:"assigned_to",label:u._({id:"XQACoK"}),description:u._({id:"OVVPn5"}),choices:t}}function zr({choices:t}){return{name:"created_by",label:u._({id:"egTba/"}),description:u._({id:"cX/tzW"}),choices:t}}function or({flt:t,tableState:e}){const o=c.useCallback(()=>{const r=e.activeFilters.filter(a=>a.name!==t.name);e.setActiveFilters(r)},[t]);return n.jsx(Mo,{p:"sm",shadow:"sm",radius:"xs",children:n.jsxs(se,{justify:"space-between",wrap:"nowrap",children:[n.jsxs(ke,{gap:"xs",children:[n.jsx(le,{size:"sm",children:t.label}),n.jsx(le,{size:"xs",children:t.description})]}),n.jsxs(se,{justify:"right",children:[n.jsx(Fo,{children:t.displayValue??t.value}),n.jsx(fe,{label:u._({id:"rn2/2V"}),withinPortal:!0,children:n.jsx(Vt,{size:"md",color:"red",onClick:o})})]})]},t.name)})}function ar({filterType:t,valueOptions:e,onValueChange:o}){const r=c.useCallback(l=>{if(l){const h=l.toString();o(la(h).format("YYYY-MM-DD"))}else o("")},[o]),[a,i]=c.useState("");switch(t){case"text":return n.jsx(Ot,{label:u._({id:"wMHvYH"}),value:a,placeholder:u._({id:"Q//Mlp"}),rightSection:n.jsx(ie,{"aria-label":"apply-text-filter",variant:"transparent",onClick:()=>o(a),children:n.jsx(Po,{})}),onChange:l=>i(l.currentTarget.value),onKeyDown:l=>{l.key==="Enter"&&o(a)}});case"date":return n.jsx(na,{label:u._({id:"wMHvYH"}),placeholder:u._({id:"A63fc7"}),onChange:r});case"choice":case"boolean":default:return n.jsx(Wt,{data:e,searchable:t!="boolean",label:u._({id:"wMHvYH"}),placeholder:u._({id:"Fo55lj"}),onChange:l=>o(l),maxDropdownHeight:800})}}function rr({tableState:t,availableFilters:e}){const o=c.useMemo(()=>{var s,m,C;let d=[];return t.activeFilters&&t.activeFilters.length>0&&(d=((s=t.activeFilters)==null?void 0:s.map(g=>g.name))??[]),((C=(m=e==null?void 0:e.filter(g=>!d.includes(g.name)))==null?void 0:m.sort((g,j)=>g.label.localeCompare(j.label)))==null?void 0:C.map(g=>({value:g.name,label:g.label,description:g.description})))??[]},[t.activeFilters,e]),[r,a]=c.useState(null),i=c.useMemo(()=>{const d=e==null?void 0:e.find(s=>s.name===r);return d?tr(d):[]},[r]),l=c.useMemo(()=>{var d;return((d=e==null?void 0:e.find(s=>s.name===r))==null?void 0:d.type)??"boolean"},[r]),h=c.useCallback(d=>{var g,j;const s=e.find(k=>k.name===r);if(!s)return;const m=((g=t.activeFilters)==null?void 0:g.filter(k=>k.name!==r))??[],C={...s,value:d,displayValue:(j=i.find(k=>k.value===d))==null?void 0:j.label};t.setActiveFilters([...m,C]),a(null)},[r]);return n.jsxs(ke,{gap:"xs",children:[n.jsx(Bt,{}),n.jsx(Wt,{data:o,searchable:!0,placeholder:u._({id:"hpMOSe"}),label:u._({id:"o7J4JM"}),onChange:d=>a(d),maxDropdownHeight:800}),r&&n.jsx(ar,{filterType:l,valueOptions:i,onValueChange:h})]})}function lr({availableFilters:t,tableState:e,opened:o,onClose:r}){var h;const[a,i]=c.useState(!1);c.useEffect(()=>{i(!1)},[e.activeFilters]);const l=c.useMemo(()=>((e==null?void 0:e.activeFilters)??[]).length>0,[e.activeFilters]);return n.jsx(Ao,{size:"sm",position:"right",withCloseButton:!0,opened:o,onClose:r,closeButtonProps:{"aria-label":"filter-drawer-close"},title:n.jsx(Uo,{size:"lg",children:u._({id:"l34cnu"})}),children:n.jsxs(ke,{gap:"xs",children:[l&&((h=e.activeFilters)==null?void 0:h.map(d=>n.jsx(or,{flt:d,tableState:e},d.name))),l&&n.jsx(Bt,{}),a&&n.jsx(ke,{gap:"xs",children:n.jsx(rr,{tableState:e,availableFilters:t})}),a&&n.jsx(De,{onClick:()=>i(!1),color:"orange",variant:"subtle",children:n.jsx(le,{children:u._({id:"dEgA5A"})})}),!a&&e.activeFilters.length<t.length&&n.jsx(De,{onClick:()=>i(!0),color:"green",variant:"subtle",children:n.jsx(le,{children:u._({id:"PzFzS+"})})}),!a&&e.activeFilters.length>0&&n.jsx(De,{onClick:e.clearActiveFilters,color:"red",variant:"subtle",children:n.jsx(le,{children:u._({id:"J8ECgX"})})})]})})}function ir({searchCallback:t}){const[e,o]=c.useState(""),[r]=No(e,500);return c.useEffect(()=>{t(r)},[r]),n.jsx(Ot,{value:e,leftSection:n.jsx(Eo,{}),placeholder:u._({id:"A1taO8"}),onChange:a=>o(a.target.value),rightSection:e.length>0?n.jsx(Vt,{size:"xs",onClick:()=>o("")}):null})}function sr({tableUrl:t,tableState:e,tableProps:o,hasSwitchableColumns:r,columns:a,filters:i,toggleColumn:l}){var g,j,k,S;const h=Dt(),[d,s]=c.useState(!1),m=b=>{const p={...o.params};if(e.activeFilters&&e.activeFilters.forEach(M=>{p[M.name]=M.value}),e.queryFilters)for(const[M,z]of e.queryFilters)p[M]=z;e.searchTerm&&(p.search=e.searchTerm),p.export=b;const A=h.getUri({url:t,params:p});window.open(A,"_blank")},C=oa({url:t??"",title:u._({id:"NEGzXb"}),preFormContent:n.jsx(_t,{color:"red",title:u._({id:"3kYcuM"}),children:u._({id:"U99rVM"})}),initialData:{items:e.selectedIds},fields:{items:{hidden:!0}},onFormSuccess:()=>{e.clearSelectedRecords(),e.refreshTable(),o.afterBulkDelete&&o.afterBulkDelete()}});return n.jsxs(n.Fragment,{children:[C.modal,o.enableFilters&&(i.length??0)>0&&n.jsx(st,{label:`InvenTreeTableFilterDrawer-${e.tableKey}`,children:n.jsx(lr,{availableFilters:i,tableState:e,opened:d,onClose:()=>s(!1)})}),e.queryFilters.size>0&&n.jsx(_t,{color:"yellow",withCloseButton:!0,title:u._({id:"VUTcDq"}),onClose:()=>e.clearQueryFilters()}),n.jsxs(se,{justify:"apart",grow:!0,wrap:"nowrap",children:[n.jsxs(se,{justify:"left",gap:5,wrap:"nowrap",children:[n.jsx(Ja,{items:e.selectedIds,modelType:o.modelType,enableLabels:o.enableLabels,enableReports:o.enableReports}),(((g=o.barcodeActions)==null?void 0:g.length)??0)>0&&n.jsx(Xa,{icon:n.jsx(Io,{}),label:u._({id:"heU0Hk"}),tooltip:u._({id:"heU0Hk"}),actions:o.barcodeActions??[]},"barcode-actions"),o.enableBulkDelete&&n.jsx(aa,{disabled:!e.hasSelectedRecords,icon:n.jsx(Ht,{}),color:"red",tooltip:u._({id:"QZQ+5V"}),onClick:()=>{C.open()}}),(j=o.tableActions)==null?void 0:j.map((b,p)=>n.jsx(n.Fragment,{children:b},p))]},"custom-actions"),n.jsx(zo,{}),n.jsxs(se,{justify:"right",gap:5,wrap:"nowrap",children:[o.enableSearch&&n.jsx(ir,{searchCallback:b=>e.setSearchTerm(b)}),o.enableRefresh&&n.jsx(ie,{variant:"transparent","aria-label":"table-refresh",children:n.jsx(fe,{label:u._({id:"8RYNR1"}),children:n.jsx(Lo,{onClick:()=>{e.refreshTable(),e.clearSelectedRecords()}})})}),r&&n.jsx(Za,{columns:a,onToggleColumn:l}),o.enableFilters&&i.length>0&&n.jsx(Bo,{size:"xs",label:((k=e.activeFilters)==null?void 0:k.length)??0,disabled:((S=e.activeFilters)==null?void 0:S.length)==0,children:n.jsx(ie,{variant:"transparent","aria-label":"table-select-filters",children:n.jsx(fe,{label:u._({id:"l34cnu"}),children:n.jsx(Vo,{onClick:()=>s(!d)})})})}),o.enableDownload&&n.jsx(er,{downloadCallback:m},"download-action")]})]})]})}function Lr(t){return{...t,color:void 0,icon:n.jsx(Wo,{}),onClick:e=>{const o=$t(t.modelType,t.modelId);Kt(o,t.navigate,e)}}}function Br(t){return{...t,title:u._({id:"euc6Ns"}),color:"green",icon:n.jsx(Oo,{})}}function Vr(t){return{...t,title:u._({id:"ePK91l"}),color:"blue",icon:n.jsx(Ho,{})}}function Wr(t){return{...t,title:u._({id:"cnGeoo"}),color:"red",icon:n.jsx(Ht,{})}}function Or(t){return{...t,title:u._({id:"dEgA5A"}),color:"red",icon:n.jsx(Do,{})}}function cr({title:t,actions:e,disabled:o=!1,index:r}){function a(s){ct(s),l(!i)}const[i,l]=c.useState(!1),h=c.useMemo(()=>e.filter(s=>!s.hidden),[e]);function d(s){return n.jsx(fe,{withinPortal:!0,label:s.tooltip??s.title,position:"left",children:n.jsx(Y.Item,{color:s.color,leftSection:s.icon,onClick:m=>{var C;ct(m),(C=s.onClick)==null||C.call(s,m),l(!1)},disabled:s.disabled||!1,children:s.title})},s.title)}return h.length>0&&n.jsxs(Y,{withinPortal:!0,disabled:o,position:"bottom-end",opened:i,onChange:l,children:[n.jsx(Y.Target,{children:n.jsx(fe,{withinPortal:!0,label:t||u._({id:"7L01XJ"}),children:n.jsx(ie,{"aria-label":`row-action-menu-${r??""}`,onClick:a,disabled:o,variant:"subtle",color:"gray",children:n.jsx($o,{})},`row-action-menu-${r??""}`)})}),n.jsx(Y.Dropdown,{children:h.map(s=>n.jsx(d,{...s},s.title))})]})}const Nt=25,dr=[10,15,20,25,50,100,500],ur={params:{},noRecordsText:u._({id:"EqGTpW"}),enableDownload:!1,enableLabels:!1,enableReports:!1,enableFilters:!0,enablePagination:!0,enableRefresh:!0,enableSearch:!0,enableSelection:!1,defaultSortColumn:"",barcodeActions:[],tableFilters:[],tableActions:[]};function Hr({url:t,tableState:e,tableData:o,columns:r,props:a}){const{getTableColumnNames:i,setTableColumnNames:l,getTableSorting:h,setTableSorting:d,loader:s}=ea(),[m,C]=c.useState({}),g=Dt(),j=Qo(),{showContextMenu:k}=Yo(),S=c.useMemo(()=>{var v,x;return((x=(v=a.tableFilters)==null?void 0:v.filter(R=>R.active!=!1))==null?void 0:x.map(R=>({...R,label:R.label??m[R.name]??`${R.name}`})))??[]},[a.tableFilters,m]),b=it({enabled:!!t&&!o,queryKey:["options",t,e.tableKey,a.enableColumnCaching],retry:3,refetchOnMount:!0,gcTime:5e3,queryFn:async()=>!t||a.enableColumnCaching==!1||m&&Object.keys(m).length>0?null:g.options(t,{params:p.params}).then(v=>{if(v.status==200){const x={},R=qt(v,"GET",!0)||{};ra(R,(H,W)=>{W.label&&(x[H]=W.label)});const _=e.tableKey.replaceAll("-","");C(x),l(_)(x)}return null}).catch(()=>(Ko({title:u._({id:"DFEq8c"}),message:u._({id:"H7mqmH"}),color:"red"}),null))});c.useEffect(()=>{if(a.enableColumnCaching==!1)return;const v=e.tableKey.replaceAll("-",""),x=i(v);if(x!=null){C(x);return}b.refetch()},[t,a.params,a.enableColumnCaching]);const p=c.useMemo(()=>({...ur,...a}),[a]),A=c.useMemo(()=>p.enableSelection||p.enableBulkDelete||!1,[p]),M=c.useMemo(()=>a.enableColumnSwitching==!1?!1:r.some(v=>v.hidden==!0?!1:v.switchable!=!1),[r,a.enableColumnSwitching]),z=c.useCallback(v=>{e.setSelectedRecords(v)},[e.setSelectedRecords]),f=c.useMemo(()=>{const v=r.filter(x=>(x==null?void 0:x.hidden)!=!0).map(x=>{let R=x.hidden??!1;return(x.switchable??!0)&&(R=e.hiddenColumns.includes(x.accessor)),{...x,hidden:R,noWrap:!0,title:x.title??m[x.accessor]??`${x.accessor}`}});return p.rowActions&&v.push({accessor:"--actions--",title:"   ",hidden:!1,switchable:!1,width:50,render:(x,R)=>{var _;return n.jsx(cr,{actions:((_=p.rowActions)==null?void 0:_.call(p,x))??[],disabled:e.selectedRecords.length>0,index:R})}}),v},[r,m,p.rowActions,e.hiddenColumns,e.selectedRecords]);function T(v){const x=[...f],R=x.findIndex(_=>_.accessor==v);R>=0&&R<x.length&&(x[R].hidden=!x[R].hidden),e.setHiddenColumns(x.filter(_=>_.hidden).map(_=>_.accessor))}c.useEffect(()=>{e.setPage(1)},[e.searchTerm]);const[w,y]=c.useState({columnAccessor:p.defaultSortColumn??"",direction:"asc"}),F=c.useCallback((v=!1)=>{const x={...p.params};if(e.activeFilters&&e.activeFilters.forEach(_=>{x[_.name]=_.value}),e.queryFilters)for(const[_,H]of e.queryFilters)x[_]=H;if(e.searchTerm&&(x.search=e.searchTerm),p.enablePagination&&v){const _=e.pageSize??Nt;_!=e.pageSize&&e.setPageSize(_),x.limit=_,x.offset=(e.page-1)*_}const R=N();return R&&(w.direction=="asc"?x.ordering=R:x.ordering=`-${R}`),x},[p.params,p.enablePagination,e.activeFilters,e.queryFilters,e.searchTerm,e.pageSize,e.setPageSize,w,N]);c.useEffect(()=>{const v=e.tableKey.split("-")[0],x=h(v);x&&y(x)},[]);function N(){const v=w.columnAccessor;if(v=="")return"";const x=f.find(R=>R.accessor==v);return(x==null?void 0:x.ordering)||v}const[E,L]=c.useState(p.noRecordsText??u._({id:"EqGTpW"})),D=v=>{e.setPage(1),y(v);const x=e.tableKey.split("-")[0];d(x)(v)},$=async()=>{const v=F(!0);return t?g.get(t,{params:v,timeout:5*1e3}).then(x=>{var R,_;switch(x.status){case 200:L(p.noRecordsText??u._({id:"EqGTpW"}));let H=((R=x.data)==null?void 0:R.results)??x.data??[];return a.dataFormatter&&(H=a.dataFormatter(H)),Array.isArray(H)||(L(u._({id:"3o3AAs"})),H=[]),e.setRecordCount(((_=x.data)==null?void 0:_.count)??H.length),H;case 400:L(u._({id:"UFBeQV"}));break;case 401:L(u._({id:"dA/8If"}));break;case 403:L(u._({id:"7JBW66"}));break;case 404:L(u._({id:"KPx1UV"}));break;default:L(`${u._({id:"29VNqC"})}: ${x.statusText}`);break}return[]}).catch(x=>(L(`${u._({id:"SlfejT"})}: ${x.message}`),[])):[]},{data:K,isFetching:G,isLoading:I,refetch:X}=it({queryKey:["tabledata",t,e.page,a.params,w.columnAccessor,w.direction,e.tableKey,e.activeFilters,e.searchTerm],enabled:!!t&&!o,queryFn:$,refetchOnMount:!0});c.useEffect(()=>{X()},[e.queryFilters]),c.useEffect(()=>{e.setIsLoading(G||I||b.isFetching||b.isLoading)},[G,I,b]),c.useEffect(()=>{const v=o??K??[];e.setRecords(v),p.enablePagination||e.setPageSize((v==null?void 0:v.length)??Nt)},[o,K]);const V=c.useCallback(({event:v,record:x,index:R,column:_,columnIndex:H})=>{if(_.accessor!="--actions--"){if(a.onCellClick)a.onCellClick({event:v,record:x,index:R,column:_,columnIndex:H});else if(a.onRowClick)a.onRowClick(x,R,v);else if(p.modelType){const W=p.modelField??"pk",Pe=ta(x,W);if(Pe){ct(v);const Ye=$t(p.modelType,Pe);Kt(Ye,j,v)}}}},[a.onRowClick,a.onCellClick]),J=({record:v,column:x,event:R})=>{if((x==null?void 0:x.noContext)!==!0){if(a.onCellContextMenu)return a.onCellContextMenu(v,R);if(a.rowActions){const _=()=>{},H=a.rowActions(v).map(W=>({key:W.title??"",title:W.title??"",color:W.color,icon:W.icon,onClick:W.onClick??_,hidden:W.hidden,disabled:W.disabled}));return k(H)(R)}else return k([])(R)}};function Z(v){e.setPageSize(v),e.setPage(1),e.refreshTable()}const ae=c.useMemo(()=>{if(a.rowExpansion)return{...a.rowExpansion,expanded:{recordIds:e.expandedRecords,onRecordIdsChange:v=>{e.setExpandedRecords(v)}}}},[e.expandedRecords,e.setExpandedRecords,a.rowExpansion]),ce=c.useMemo(()=>{let v={};return p.enablePagination&&(v={...v,totalRecords:e.recordCount,recordsPerPage:e.pageSize,page:e.page,onPageChange:e.setPage,recordsPerPageOptions:dr,onRecordsPerPageChange:Z}),v},[p.enablePagination,e.recordCount,e.pageSize,e.page,e.setPage,Z]);return n.jsx(n.Fragment,{children:n.jsxs(ke,{gap:"xs",children:[!p.noHeader&&n.jsx(st,{label:`InvenTreeTableHeader-${e.tableKey}`,children:n.jsx(sr,{tableUrl:t,tableState:e,tableProps:p,hasSwitchableColumns:M,columns:f,filters:S,toggleColumn:T})}),n.jsx(st,{label:`InvenTreeTable-${e.tableKey}`,children:n.jsx(ye,{pos:"relative",children:n.jsx(Ya,{withTableBorder:!p.noHeader,withColumnBorders:!0,striped:!0,highlightOnHover:!0,loaderType:s,pinLastColumn:p.rowActions!=null,idAccessor:e.idAccessor??"pk",minHeight:p.minHeight??300,sortStatus:w,onSortStatusChange:D,selectedRecords:A?e.selectedRecords:void 0,onSelectedRecordsChange:A?z:void 0,rowExpansion:ae,rowStyle:p.rowStyle,fetching:G,noRecordsText:E,records:e.records,columns:f,onCellClick:V,noHeader:p.noHeader??!1,defaultColumnProps:{noWrap:!0,textAlign:"left",cellsStyle:()=>v=>({overflow:"hidden"})},onCellContextMenu:J,...ce})})})]})})}export{vr as A,Rr as C,Pr as H,Hr as I,yr as M,Nr as O,Er as P,Vr as R,nr as S,_r as T,Ya as Y,Wr as a,jr as b,kr as c,Tr as d,Sr as e,Ar as f,Mr as g,Fr as h,Ir as i,zr as j,Lr as k,Ja as l,cr as m,Br as n,Or as o,Qt as r,wr as u};
