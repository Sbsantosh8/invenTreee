import{r as t,i as s,j as o}from"./vendor-9x6k4T-r.js";import{b as A,u as F,A as I}from"./UseForm-C7xHtQGh.js";import{d as k,I as w}from"./ImporterForms-Bl05PTNE.js";import{A as j}from"./AttachmentLink-r3l6VS50.js";import{S as v,j as T,P as C}from"./ColumnRenderers-CTwRHGdM.js";import{b as y}from"./Instance-ZaRjKoLj.js";import{A as a,m as d,e as _}from"./index-Bd_yPD7D.js";import{b as P,c as D}from"./UseFilter-DqHeVZaa.js";import{u as M,S as O,a as U,I as q}from"./InvenTreeTable-KDc6oHjF.js";import"./DesktopAppView-D7dqNL6j.js";import"./ThemeContext-DRe09WSE.js";import"./dayjs.min-DUmzidR_.js";import"./ApiIcon-BBFuOj6_.js";import"./UseInstance-Cb46b_w1.js";import"./UseStatusCodes-gEst0ZT5.js";import"./navigation-BUwul1Ze.js";import"./YesNoButton-BsHbI51V.js";import"./formatters-MBbtNL9a.js";import"./ActionDropdown-DlGcqXhK.js";function se(){const r=M("importsession"),[b,l]=t.useState(!1),[n,i]=t.useState(void 0),m=A({url:a.import_session_list,pk:n,title:s._({id:"HkPAKw"}),table:r}),c=F({url:a.import_session_list,title:s._({id:"PlWSqy"}),fields:k(),onFormSuccess:e=>{i(e.pk),l(!0),r.refreshTable()}}),f=t.useMemo(()=>[{accessor:"model_type",sortable:!0},v({model:d.importsession,accessor:"status"}),{accessor:"data_file",render:e=>o.jsx(j,{attachment:e.data_file}),sortable:!1,noContext:!0},T({accessor:"timestamp",title:s._({id:"3wG7HI"})}),{accessor:"user",sortable:!1,render:e=>y({instance:e.user_detail})},{sortable:!1,accessor:"row_count",title:s._({id:"drGZDS"}),render:e=>o.jsx(C,{progressLabel:!0,value:e.completed_row_count,maximum:e.row_count})}],[]),p=P(),u=D({url:_(a.import_session_list),method:"OPTIONS",accessor:"data.actions.POST.model_type.choices",transform:e=>({value:e.value,label:e.display_name})}),S=t.useMemo(()=>[{name:"model_type",label:s._({id:"pLosEx"}),description:s._({id:"qrooIv"}),choices:u.choices},{name:"status",label:s._({id:"uAQUqI"}),description:s._({id:"iv0viw"}),choiceFunction:O(d.importsession)},{name:"user",label:s._({id:"7PzzBU"}),description:s._({id:"FVjW63"}),choices:p.choices}],[u.choices,p.choices]),h=t.useMemo(()=>[o.jsx(I,{tooltip:s._({id:"PlWSqy"}),onClick:()=>c.open()},"create-import-session")],[]),x=t.useCallback(e=>[U({onClick:()=>{i(e.pk),m.open()}})],[]);return o.jsxs(o.Fragment,{children:[c.modal,m.modal,o.jsx(q,{url:_(a.import_session_list),tableState:r,columns:f,props:{rowActions:x,tableActions:h,tableFilters:S,enableBulkDelete:!0,enableSelection:!0,onRowClick:e=>{i(e.pk),l(!0)}}}),o.jsx(w,{sessionId:n??-1,opened:n!==void 0&&b,onClose:()=>{i(void 0),l(!1),r.refreshTable()}})]})}export{se as default};
