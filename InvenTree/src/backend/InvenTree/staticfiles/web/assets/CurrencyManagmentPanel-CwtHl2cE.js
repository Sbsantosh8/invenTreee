import{r as o,j as e,S as _,i as r,bB as i,s as d,ff as b}from"./vendor-9x6k4T-r.js";import{a as h,e as c,A as n,x as j}from"./index-Bd_yPD7D.js";import{c as y}from"./UseForm-C7xHtQGh.js";import{F as C}from"./FactCollection-Crs9BYnL.js";import{G as A}from"./SettingList-B-7Q1HIu.js";import{u as E,I as R}from"./InvenTreeTable-KDc6oHjF.js";import"./DesktopAppView-D7dqNL6j.js";import"./ThemeContext-DRe09WSE.js";import"./dayjs.min-DUmzidR_.js";import"./ApiIcon-BBFuOj6_.js";import"./Instance-ZaRjKoLj.js";import"./navigation-BUwul1Ze.js";import"./ActionDropdown-DlGcqXhK.js";function T({setInfo:t}){const s=E("currency","currency"),l=o.useMemo(()=>[{accessor:"currency",title:r._({id:"Q2lUR2"}),switchable:!1},{accessor:"rate",title:r._({id:"fqDzSu"}),switchable:!1}],[]),u=o.useCallback(()=>{h.post(c(n.currency_refresh),{}).then(()=>{s.refreshTable(),d({title:r._({id:"zzDlyQ"}),message:r._({id:"aQFOy1"}),color:"green"})}).catch(a=>{j({error:a,title:r._({id:"OZSHCs"})})})},[]),m=o.useMemo(()=>[e.jsx(y,{onClick:u,tooltip:r._({id:"HQlD/8"}),icon:e.jsx(b,{})},"refresh")],[]);return e.jsx(R,{url:c(n.currency_list),tableState:s,columns:l,props:{tableActions:m,dataFormatter:a=>{t(a);const p=a.exchange_rates??{};return Object.entries(p).map(([f,x])=>({currency:f,rate:x}))}}})}function Q(){const[t,s]=o.useState({});return e.jsxs(_,{gap:"xs",children:[e.jsx(C,{items:[{title:r._({id:"h+ZkcR"}),value:t==null?void 0:t.updated},{title:r._({id:"3pmGAW"}),value:t==null?void 0:t.base_currency}]}),e.jsx(i,{}),e.jsx(T,{setInfo:s}),e.jsx(i,{}),e.jsx(A,{keys:["CURRENCY_UPDATE_PLUGIN","CURRENCY_UPDATE_INTERVAL"]})]})}export{T as CurrencyTable,Q as default};
