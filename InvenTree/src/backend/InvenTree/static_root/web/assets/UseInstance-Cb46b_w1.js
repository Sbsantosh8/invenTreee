import{r as c,bA as O}from"./vendor-9x6k4T-r.js";import{u as R}from"./DesktopAppView-D7dqNL6j.js";import{e as v}from"./index-Bd_yPD7D.js";function J({endpoint:i,pk:r,params:o={},defaultValue:e={},pathParams:u,hasPrimaryKey:y=!0,refetchOnMount:S=!0,refetchOnWindowFocus:m=!1,throwError:g=!1,updateInterval:I}){const q=R(),[E,n]=c.useState(e),[b,a]=c.useState(0),s=O({queryKey:["instance",i,r,JSON.stringify(o),JSON.stringify(u)],queryFn:async()=>{if(y&&(r==null||r==null||r.toString().length==0||r=="-1"))return n(e),e;const f=v(i,r,u);return q.get(f,{timeout:1e4,params:o}).then(t=>{switch(a(t.status),t.status){case 200:return n(t.data),t.data;default:return n(e),e}}).catch(t=>{var h;if(a(((h=t.response)==null?void 0:h.status)||0),n(e),console.error(`ERR: Error fetching instance ${f}:`,t),g)throw t;return e})},refetchOnMount:S,refetchOnWindowFocus:m??!1,refetchInterval:I}),l=c.useMemo(()=>s.isFetched&&s.isSuccess&&!s.isError,[s]),w=c.useCallback(()=>{s.refetch()},[]),F=c.useCallback(()=>s.refetch(),[]);return{instance:E,setInstance:n,refreshInstance:w,refreshInstancePromise:F,instanceQuery:s,requestStatus:b,isLoaded:l}}export{J as u};
