import{r as u,bA as W,j as e,S as T,T as I,bG as v,cx as P,i as l,L as y,cT as E,ey as D,G as A,bC as N,m as U,bT as $,db as ee,v as m,bD as s,by as se,b4 as k,ez as ie,eA as B,c4 as ne,l as K,eB as re,eC as V,bz as M,eD as G,eE as te,bO as le,co as ae,eF as de,aT as oe,eG as ce,cu as je,eH as xe,eI as he,ci as ue}from"./vendor-9x6k4T-r.js";import{P as _e}from"./PageTitle-D--W0kLm.js";import{P as Ee,S as Te}from"./Placeholder-CAM2djCB.js";import{P as me}from"./PanelGroup-BCG3mCoU.js";import{U as L}from"./SettingList-B-7Q1HIu.js";import{c as F,A as _,a as S,e as f,q as Se,u as g,I as fe,S as H}from"./index-Bd_yPD7D.js";import{a as i,e as Ce}from"./ThemeContext-DRe09WSE.js";import{Y as Re,a as w}from"./YesNoButton-BsHbI51V.js";import{A as Ae}from"./ActionDropdown-DlGcqXhK.js";import{a as pe}from"./UseForm-C7xHtQGh.js";import{L as ge,C as Ie}from"./LanguageSelect-D7zo4pHg.js";import"./navigation-BUwul1Ze.js";import"./ApiIcon-BBFuOj6_.js";import"./RemoteComponent-C0S0OuAi.js";import"./DesktopAppView-D7dqNL6j.js";import"./dayjs.min-DUmzidR_.js";import"./Instance-ZaRjKoLj.js";function be(){const[n,r]=u.useState(!1),[c,j]=u.useState(!1),{isLoading:x,data:t}=W({queryKey:["sso-providers"],queryFn:()=>S.get(f(_.sso_providers)).then(h=>h.data)});return u.useEffect(()=>{t!==void 0&&(r(t.sso_enabled||!1),j(t.mfa_required||!1))},[t]),e.jsxs(T,{children:[e.jsx(I,{order:5,children:e.jsx(i,{id:"O3oNi5"})}),e.jsx(Pe,{}),e.jsx(I,{order:5,children:e.jsx(i,{id:"sGV/QR"})}),n?e.jsx(ye,{dataProvider:t}):e.jsx(v,{icon:e.jsx(P,{size:"1rem"}),title:l._({id:"GYQmzM"}),color:"yellow",children:e.jsx(i,{id:"Sm3zWc"})}),e.jsx(I,{order:5,children:e.jsx(i,{id:"gzRIYb"})}),x?e.jsx(y,{}):e.jsx(e.Fragment,{children:c?e.jsx(Oe,{}):e.jsx(v,{icon:e.jsx(P,{size:"1rem"}),title:l._({id:"GYQmzM"}),color:"yellow",children:e.jsx(i,{id:"3JPMTK"})})}),e.jsx(I,{order:5,children:e.jsx(i,{id:"TP9/K5"})}),e.jsx(Le,{})]})}function Pe(){const[n,r]=u.useState(""),[c,j]=u.useState(""),[x]=F(d=>[d.user]),{isLoading:t,data:h,refetch:p}=W({queryKey:["emails"],queryFn:()=>S.get(f(_.user_emails)).then(d=>d.data)});function C(d){S.post(f(d,void 0,{id:n}),{}).then(()=>{p()}).catch(R=>console.log(R.data))}function a(){S.post(f(_.user_emails),{email:c,user:x==null?void 0:x.pk}).then(()=>{p()}).catch(d=>console.log(d.data))}return t?e.jsx(y,{}):e.jsxs(E,{children:[e.jsx(E.Col,{span:6,children:e.jsx(D.Group,{value:n,onChange:r,name:"email_accounts",label:l._({id:"Xfy/DT"}),children:e.jsx(T,{mt:"xs",children:h.map(d=>e.jsx(D,{value:String(d.id),label:e.jsxs(A,{justify:"space-between",children:[d.email,d.primary&&e.jsx(N,{color:"blue",children:e.jsx(i,{id:"T/R+Qz"})}),d.verified?e.jsx(N,{color:"green",children:e.jsx(i,{id:"QDEWii"})}):e.jsx(N,{color:"yellow",children:e.jsx(i,{id:"VBTGXl"})})]})},d.id))})})}),e.jsx(E.Col,{span:6,children:e.jsxs(T,{children:[e.jsx(U,{children:e.jsx(i,{id:"oLztc+"})}),e.jsx($,{label:l._({id:"Y/cuRF"}),placeholder:l._({id:"JqLqpm"}),leftSection:e.jsx(ee,{}),value:c,onChange:d=>j(d.currentTarget.value)})]})}),e.jsx(E.Col,{span:6,children:e.jsxs(A,{children:[e.jsx(m,{onClick:()=>C(_.user_email_primary),children:e.jsx(i,{id:"g/Kbij"})}),e.jsx(m,{onClick:()=>C(_.user_email_verify),children:e.jsx(i,{id:"+GoJJW"})}),e.jsx(m,{onClick:()=>C(_.user_email_remove),children:e.jsx(i,{id:"t/YqKh"})})]})}),e.jsx(E.Col,{span:6,children:e.jsx(m,{onClick:a,children:e.jsx(i,{id:"0+CYPj"})})})]})}function ye({dataProvider:n}){const[r,c]=u.useState(""),[j,x]=u.useState(),{isLoading:t,data:h}=W({queryKey:["sso-list"],queryFn:()=>S.get(f(_.user_sso)).then(a=>a.data)});u.useEffect(()=>{if(n===void 0||h===void 0)return;const a=h.map(b=>b.provider);function d(b){return!a.includes(b.id)}let R=n.providers;R=R.filter(d),x(R)},[n,h]);function p(){S.post(f(_.user_sso_remove,void 0,{id:r})).then(()=>{Se.removeQueries({queryKey:["sso-list"]})}).catch(a=>console.log(a.data))}if(t)return e.jsx(y,{});function C({provider:a}){const d=e.jsx(m,{component:"a",href:a.connect,variant:"outline",disabled:!a.configured,children:e.jsxs(A,{justify:"space-between",children:[a.display_name,a.configured==!1&&e.jsx(P,{})]})},a.id);return a.configured?d:e.jsx(se,{label:l._({id:"vwfjas"}),children:d})}return e.jsxs(E,{children:[e.jsx(E.Col,{span:6,children:h.length==0?e.jsx(v,{icon:e.jsx(P,{size:"1rem"}),title:l._({id:"SDND4q"}),color:"yellow",children:e.jsx(i,{id:"fkCzQP"})}):e.jsxs(T,{children:[e.jsx(D.Group,{value:r,onChange:c,name:"sso_accounts",label:l._({id:"B1uCAI"}),children:e.jsx(T,{mt:"xs",children:h.map(a=>e.jsx(D,{value:String(a.id),label:a.provider},a.id))})}),e.jsx(m,{onClick:p,children:e.jsx(i,{id:"t/YqKh"})})]})}),e.jsx(E.Col,{span:6,children:e.jsxs(T,{children:[e.jsx(U,{children:"Add SSO Account"}),e.jsx(U,{children:j===void 0?e.jsx(i,{id:"yQE2r9"}):e.jsx(T,{gap:"xs",children:j.map(a=>e.jsx(C,{provider:a},a.id))})})]})})]})}function Oe(){return e.jsxs(e.Fragment,{children:["MFA Details",e.jsx(Ee,{})]})}function Le(){const{isLoading:n,data:r,refetch:c}=W({queryKey:["token-list"],queryFn:()=>S.get(f(_.user_tokens)).then(t=>t.data)});function j(t){S.delete(f(_.user_tokens,t)).then(()=>{c()}).catch(h=>console.log(h.data))}const x=u.useMemo(()=>n||r===void 0?null:r.map(t=>e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(Re,{value:t.active})}),e.jsx(s.Td,{children:t.expiry}),e.jsx(s.Td,{children:t.last_seen}),e.jsx(s.Td,{children:t.token}),e.jsx(s.Td,{children:t.name}),e.jsx(s.Td,{children:t.in_use?e.jsx(i,{id:"Wcm4Tk"}):e.jsx(m,{onClick:()=>j(t.id),color:"red",disabled:!t.active,children:e.jsx(i,{id:"GXsAby"})})})]},t.id)),[r,n]);return n?e.jsx(y,{}):r.length==0?e.jsx(v,{icon:e.jsx(P,{size:"1rem"}),color:"green",children:e.jsx(i,{id:"V9/zZt"})}):e.jsxs(s,{stickyHeader:!0,striped:!0,highlightOnHover:!0,withTableBorder:!0,children:[e.jsx(s.Thead,{children:e.jsxs(s.Tr,{children:[e.jsx(s.Th,{children:e.jsx(i,{id:"F6pfE9"})}),e.jsx(s.Th,{children:e.jsx(i,{id:"agO/T/"})}),e.jsx(s.Th,{children:e.jsx(i,{id:"bLZksC"})}),e.jsx(s.Th,{children:e.jsx(i,{id:"TP9/K5"})}),e.jsx(s.Th,{children:e.jsx(i,{id:"6YtxFj"})}),e.jsx(s.Th,{children:e.jsx(i,{id:"7L01XJ"})})]})}),e.jsx(s.Tbody,{children:x})]})}function He(){const n=Ce(),[r,c]=F(t=>[t.user,t.fetchUserState]),j=u.useMemo(()=>({first_name:{},last_name:{}}),[]),x=pe({title:l._({id:"//An38"}),url:_.user_me,onFormSuccess:c,fields:j,successMessage:l._({id:"kKNzpm"})});return e.jsxs(e.Fragment,{children:[x.modal,e.jsxs(T,{gap:"xs",children:[e.jsxs(A,{justify:"space-between",children:[e.jsx(I,{order:3,children:e.jsx(i,{id:"anfIXl"})}),e.jsx(Ae,{tooltip:l._({id:"14H4zc"}),icon:e.jsx(k,{}),actions:[{name:l._({id:"GTOcxw"}),icon:e.jsx(k,{}),tooltip:l._({id:"//An38"}),onClick:x.open},{name:l._({id:"VhMDMg"}),icon:e.jsx(ie,{}),tooltip:l._({id:"QzqxNm"}),onClick:()=>{n("/change-password")}}]})]}),e.jsx(s,{children:e.jsxs(s.Tbody,{children:[e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"7sNhEz"})}),e.jsx(s.Td,{children:r==null?void 0:r.username})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"kODvZJ"})}),e.jsx(s.Td,{children:r==null?void 0:r.first_name})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"UXBCwc"})}),e.jsx(s.Td,{children:r==null?void 0:r.last_name})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"0ib+Ql"})}),e.jsx(s.Td,{children:e.jsx(w,{value:r==null?void 0:r.is_staff})})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"agYOFs"})}),e.jsx(s.Td,{children:e.jsx(w,{value:r==null?void 0:r.is_superuser})})]})]})})]})]})}function ve(n){return{[B.colors[n][6]]:n}}const Y=Object.assign({},...Object.keys(B.colors).map(n=>ve(n)));function De({height:n}){const r=ne(),[c,j]=g(o=>[o.loader,o.setLoader]),[x,t]=u.useState(r.white);function h(o){g.setState({whiteColor:o}),t(o)}const[p,C]=u.useState(r.black);function a(o){g.setState({blackColor:o}),C(o)}function d(o){const O=H.find(Z=>Z.value===o);return O||H[0]}function R(){const o=H.find(O=>O.label===g.getState().radius);return o?o.value:50}const[b,z]=u.useState(R());function q(o){z(o),g.setState({radius:d(o).label})}function X(o){g.setState({primaryColor:Y[o]})}const Q=[{value:"bars",label:l._({id:"yIoFdU"})},{value:"oval",label:l._({id:"NAZGMM"})},{value:"dots",label:l._({id:"2AXZa8"})}];function J(o){o!==null&&j(o)}return e.jsxs(K,{w:"100%",mih:n,p:0,children:[e.jsx(I,{order:3,children:e.jsx(i,{id:"DdjH42"})}),e.jsx(s,{children:e.jsxs(s.Tbody,{children:[e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"vXIe7J"})}),e.jsx(s.Td,{children:e.jsx(ge,{width:200})}),e.jsx(s.Td,{children:fe})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"FpsvqB"})}),e.jsx(s.Td,{children:e.jsx(A,{justify:"left",children:e.jsx(Ie,{})})}),e.jsx(s.Td,{})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"ca2AYV"})}),e.jsx(s.Td,{children:e.jsx(re,{format:"hex",onChange:X,withPicker:!1,swatches:Object.keys(Y)})}),e.jsx(s.Td,{children:e.jsx(m,{color:r.primaryColor,variant:"light",children:e.jsx(i,{id:"HmI5oK"})})})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"160vo+"})}),e.jsx(s.Td,{children:e.jsx(V,{value:x,onChange:h})}),e.jsx(s.Td,{children:e.jsx(M,{variant:"default",onClick:()=>h("#FFFFFF"),children:e.jsx(G,{})})})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"u01284"})}),e.jsx(s.Td,{children:e.jsx(V,{value:p,onChange:a})}),e.jsx(s.Td,{children:e.jsx(M,{variant:"default",onClick:()=>a("#000000"),children:e.jsx(G,{})})})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"bjp1xg"})}),e.jsx(s.Td,{children:e.jsx(te,{label:o=>d(o).label,defaultValue:50,step:25,marks:H,value:b,onChange:q,mb:18})})]}),e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:e.jsx(i,{id:"EBeoY+"})}),e.jsx(s.Td,{children:e.jsx(A,{justify:"left",children:e.jsx(le,{data:Q,value:c,onChange:J})})}),e.jsx(s.Td,{children:e.jsx(A,{justify:"left",children:e.jsx(y,{type:c,mah:16,size:"sm"})})})]})]})})]})}function We(){return e.jsx("div",{children:e.jsxs(ae,{cols:2,spacing:"md",children:[e.jsx(K,{w:"100%",children:e.jsx(He,{})}),e.jsx(E,{gutter:"md",children:e.jsx(E.Col,{children:e.jsx(De,{height:142})})})]})})}function $e(){const[n,r]=F(j=>[j.user,j.isLoggedIn]),c=u.useMemo(()=>[{name:"account",label:l._({id:"AeXO77"}),icon:e.jsx(de,{}),content:e.jsx(We,{})},{name:"security",label:l._({id:"a3LDKx"}),icon:e.jsx(oe,{}),content:e.jsx(be,{})},{name:"display",label:l._({id:"+4YDgS"}),icon:e.jsx(ce,{}),content:e.jsx(L,{keys:["STICKY_HEADER","DATE_DISPLAY_FORMAT","FORMS_CLOSE_USING_ESCAPE","PART_SHOW_QUANTITY_IN_FORMS","DISPLAY_SCHEDULE_TAB","DISPLAY_STOCKTAKE_TAB","TABLE_STRING_MAX_LENGTH"]})},{name:"search",label:l._({id:"A1taO8"}),icon:e.jsx(je,{}),content:e.jsx(L,{keys:["SEARCH_WHOLE","SEARCH_REGEX","SEARCH_PREVIEW_RESULTS","SEARCH_PREVIEW_SHOW_PARTS","SEARCH_HIDE_INACTIVE_PARTS","SEARCH_PREVIEW_SHOW_SUPPLIER_PARTS","SEARCH_PREVIEW_SHOW_MANUFACTURER_PARTS","SEARCH_PREVIEW_SHOW_CATEGORIES","SEARCH_PREVIEW_SHOW_STOCK","SEARCH_PREVIEW_HIDE_UNAVAILABLE_STOCK","SEARCH_PREVIEW_SHOW_LOCATIONS","SEARCH_PREVIEW_SHOW_COMPANIES","SEARCH_PREVIEW_SHOW_BUILD_ORDERS","SEARCH_PREVIEW_SHOW_PURCHASE_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_PURCHASE_ORDERS","SEARCH_PREVIEW_SHOW_SALES_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_SALES_ORDERS","SEARCH_PREVIEW_SHOW_RETURN_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_RETURN_ORDERS"]})},{name:"notifications",label:l._({id:"iDNBZe"}),icon:e.jsx(xe,{}),content:e.jsx(L,{keys:["NOTIFICATION_ERROR_REPORT"]})},{name:"reporting",label:l._({id:"ApEshE"}),icon:e.jsx(he,{}),content:e.jsx(L,{keys:["REPORT_INLINE","LABEL_INLINE","LABEL_DEFAULT_PRINTER"]})}],[]);return r()?e.jsxs(e.Fragment,{children:[e.jsx(_e,{title:l._({id:"ekfzWq"})}),e.jsxs(T,{gap:"xs",children:[e.jsx(Te,{label:"user",title:l._({id:"Puv7+X"}),subtitle:n!=null&&n.first_name&&(n!=null&&n.last_name)?`${n==null?void 0:n.first_name} ${n==null?void 0:n.last_name}`:null,shorthand:(n==null?void 0:n.username)||""}),e.jsx(me,{pageKey:"user-settings",panels:c,model:"usersettings",id:null})]})]}):e.jsx(ue,{})}export{$e as default};
