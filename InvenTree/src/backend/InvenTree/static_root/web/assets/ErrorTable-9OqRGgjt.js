import{r as l,i as s,j as e,m as T,L as f,S as h,bD as r,G as m}from"./vendor-9x6k4T-r.js";import{e as _,C as b,E as j}from"./ThemeContext-DRe09WSE.js";import{D as g}from"./DetailDrawer-DT_CXWKz.js";import{c as k,A as x,e as y}from"./index-Bd_yPD7D.js";import{b as D}from"./UseForm-C7xHtQGh.js";import{u as S}from"./UseInstance-Cb46b_w1.js";import{u as E,a as M,I as C}from"./InvenTreeTable-KDc6oHjF.js";import"./DesktopAppView-D7dqNL6j.js";import"./dayjs.min-DUmzidR_.js";import"./ApiIcon-BBFuOj6_.js";import"./Instance-ZaRjKoLj.js";import"./navigation-BUwul1Ze.js";import"./ActionDropdown-DlGcqXhK.js";function I({errorId:o}){var a;const{id:c}=b(),u=l.useMemo(()=>o??c,[o,c]),i=S({endpoint:x.error_report_list,pk:u,defaultValue:{},hasPrimaryKey:!0,refetchOnMount:!0}),t=l.useMemo(()=>i.instance||{},[i.instance]);return i.instanceQuery.isFetching||i.instanceQuery.isLoading?e.jsx(f,{}):e.jsx(h,{gap:"xs",children:e.jsx(r,{children:e.jsxs(r.Tbody,{children:[e.jsxs(r.Tr,{children:[e.jsx(r.Th,{children:s._({id:"xDAtGP"})}),e.jsx(r.Td,{children:t.info}),e.jsx(r.Td,{children:e.jsx(m,{justify:"right",children:e.jsx(j,{value:t.info,size:"sm"})})})]}),e.jsxs(r.Tr,{children:[e.jsx(r.Th,{children:s._({id:"8TMaZI"})}),e.jsx(r.Td,{children:t.when})]}),e.jsxs(r.Tr,{children:[e.jsx(r.Th,{children:s._({id:"I6gXOa"})}),e.jsx(r.Td,{children:t.path})]}),e.jsxs(r.Tr,{children:[e.jsx(r.Th,{children:s._({id:"g3fe3D"})}),e.jsx(r.Td,{colSpan:2,children:e.jsx(m,{justify:"right",children:e.jsx(j,{value:t.data,size:"sm"})})})]}),e.jsx(r.Tr,{children:e.jsx(r.Td,{colSpan:2,children:e.jsx(h,{gap:3,children:(a=t.data)==null?void 0:a.split(`
`).map((d,p)=>e.jsx(T,{size:"xs",children:d},`error-line-${p}`))})})})]})})})}function X(){const o=E("error-report"),c=k(),u=_(),i=l.useMemo(()=>[{accessor:"when",title:s._({id:"1ZF9KQ"}),sortable:!0},{accessor:"path",title:s._({id:"I6gXOa"}),sortable:!0},{accessor:"info",title:s._({id:"pao9M8"})}],[]),[t,a]=l.useState({}),d=D({url:x.error_report_list,pk:t.pk,title:s._({id:"LKUVto"}),preFormContent:e.jsx(T,{c:"red",children:s._({id:"crTsip"})}),successMessage:s._({id:"lYkkju"}),table:o}),p=l.useCallback(n=>[M({onClick:()=>{a(n),d.open()}})],[]);return e.jsxs(e.Fragment,{children:[d.modal,e.jsx(g,{title:s._({id:"7Jw/XW"}),size:"xl",renderContent:n=>{if(n)return e.jsx(I,{errorId:t.pk})}}),e.jsx(C,{url:y(x.error_report_list),tableState:o,columns:i,props:{enableBulkDelete:c.isStaff(),enableSelection:!0,rowActions:p,onRowClick:n=>{a(n),u(`${n.pk}/`)}}})]})}export{X as default};
