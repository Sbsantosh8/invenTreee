import{r as a,i,j as r}from"./vendor-9x6k4T-r.js";import{u as y,a as L,b as R,A as w}from"./UseForm-C7xHtQGh.js";import{b}from"./formatters-MBbtNL9a.js";import{e as h}from"./CommonForms-7Y99pmHv.js";import{u as D,R as I,n as E,a as S,I as j}from"./InvenTreeTable-KDc6oHjF.js";import{c as F,e as M}from"./index-Bd_yPD7D.js";import{N as T,L as g}from"./ColumnRenderers-CTwRHGdM.js";function O({endpoint:o,orderId:l,currency:k,role:t}){const n=D("extra-line-item"),s=F(),x=a.useMemo(()=>[{accessor:"reference",switchable:!1},{accessor:"description"},{accessor:"quantity",switchable:!1},{accessor:"price",title:i._({id:"vWelsN"}),render:e=>b(e.price,{currency:e.price_currency})},{accessor:"total_price",title:i._({id:"KyZVKD"}),render:e=>b(e.price,{currency:e.price_currency,multiplier:e.quantity})},T({accessor:"notes"}),g({accessor:"link"})],[]),[A,m]=a.useState({}),[u,p]=a.useState(0),c=y({url:o,title:i._({id:"pwb7Yo"}),fields:h(),initialData:{...A,price_currency:k},table:n}),d=L({url:o,pk:u,title:i._({id:"vgosWS"}),fields:h(),table:n}),f=R({url:o,pk:u,title:i._({id:"tpKh8C"}),table:n}),C=a.useCallback(e=>[I({hidden:!s.hasChangeRole(t),onClick:()=>{p(e.pk),d.open()}}),E({hidden:!s.hasAddRole(t),onClick:()=>{m({...e}),c.open()}}),S({hidden:!s.hasDeleteRole(t),onClick:()=>{p(e.pk),f.open()}})],[s,t]),_=a.useMemo(()=>[r.jsx(w,{tooltip:i._({id:"xnxWkO"}),hidden:!s.hasAddRole(t),onClick:()=>{m({order:l}),c.open()}},"add-line-item")],[s,t]);return r.jsxs(r.Fragment,{children:[c.modal,d.modal,f.modal,r.jsx(j,{tableState:n,url:M(o),columns:x,props:{params:{order:l},rowActions:C,tableActions:_}})]})}export{O as E};
